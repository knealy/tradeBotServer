var qn=Object.defineProperty;var Qn=(e,t,r)=>t in e?qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ve=(e,t,r)=>Qn(e,typeof t!="symbol"?t+"":t,r);import{r as w,a as Bn,b as Hn,R as X,L as Rt,u as Kn,B as Wn,d as zn,e as et}from"./react-vendor-kWENTzfD.js";import{_ as $,a as Me,R as _t,L as Ms,C as Pt,X as Ft,Y as lt,T as Tt,b as Vn,c as Te,B as is,d as Jn,e as Gn,f as Yn}from"./chart-vendor-BIT4Wq8p.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var $s={exports:{}},xt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=w,Zn=Symbol.for("react.element"),er=Symbol.for("react.fragment"),tr=Object.prototype.hasOwnProperty,sr=Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nr={key:!0,ref:!0,__self:!0,__source:!0};function Is(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)tr.call(t,s)&&!nr.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Zn,type:e,key:i,ref:o,props:a,_owner:sr.current}}xt.Fragment=er;xt.jsx=Is;xt.jsxs=Is;$s.exports=xt;var n=$s.exports,At={},os=Bn;At.createRoot=os.createRoot,At.hydrateRoot=os.hydrateRoot;var $e=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(s){var a=this,i=s||function(){};return this.listeners.push(i),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(o){return o!==i}),a.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),ct=typeof window>"u";function te(){}function rr(e,t){return typeof e=="function"?e(t):e}function Lt(e){return typeof e=="number"&&e>=0&&e!==1/0}function ut(e){return Array.isArray(e)?e:[e]}function Us(e,t){return Math.max(e+(t||0)-Date.now(),0)}function st(e,t,r){return We(e)?typeof t=="function"?$({},r,{queryKey:e,queryFn:t}):$({},t,{queryKey:e}):e}function ar(e,t,r){return We(e)?typeof t=="function"?$({},r,{mutationKey:e,mutationFn:t}):$({},t,{mutationKey:e}):typeof e=="function"?$({},t,{mutationFn:e}):$({},e)}function we(e,t,r){return We(e)?[$({},t,{queryKey:e}),r]:[e||{},t]}function ir(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var r=e??!t;return r?"active":"inactive"}function ls(e,t){var r=e.active,s=e.exact,a=e.fetching,i=e.inactive,o=e.predicate,l=e.queryKey,c=e.stale;if(We(l)){if(s){if(t.queryHash!==Ht(l,t.options))return!1}else if(!dt(t.queryKey,l))return!1}var u=ir(r,i);if(u==="none")return!1;if(u!=="all"){var h=t.isActive();if(u==="active"&&!h||u==="inactive"&&h)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||typeof a=="boolean"&&t.isFetching()!==a||o&&!o(t))}function cs(e,t){var r=e.exact,s=e.fetching,a=e.predicate,i=e.mutationKey;if(We(i)){if(!t.options.mutationKey)return!1;if(r){if(ke(t.options.mutationKey)!==ke(i))return!1}else if(!dt(t.options.mutationKey,i))return!1}return!(typeof s=="boolean"&&t.state.status==="loading"!==s||a&&!a(t))}function Ht(e,t){var r=(t==null?void 0:t.queryKeyHashFn)||ke;return r(e)}function ke(e){var t=ut(e);return or(t)}function or(e){return JSON.stringify(e,function(t,r){return Dt(r)?Object.keys(r).sort().reduce(function(s,a){return s[a]=r[a],s},{}):r})}function dt(e,t){return qs(ut(e),ut(t))}function qs(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(r){return!qs(e[r],t[r])}):!1}function ht(e,t){if(e===t)return e;var r=Array.isArray(e)&&Array.isArray(t);if(r||Dt(e)&&Dt(t)){for(var s=r?e.length:Object.keys(e).length,a=r?t:Object.keys(t),i=a.length,o=r?[]:{},l=0,c=0;c<i;c++){var u=r?c:a[c];o[u]=ht(e[u],t[u]),o[u]===e[u]&&l++}return s===i&&l===s?e:o}return t}function lr(e,t){if(e&&!t||t&&!e)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}function Dt(e){if(!us(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var r=t.prototype;return!(!us(r)||!r.hasOwnProperty("isPrototypeOf"))}function us(e){return Object.prototype.toString.call(e)==="[object Object]"}function We(e){return typeof e=="string"||Array.isArray(e)}function cr(e){return new Promise(function(t){setTimeout(t,e)})}function ds(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function Qs(){if(typeof AbortController=="function")return new AbortController}var ur=function(e){Me(t,e);function t(){var s;return s=e.call(this)||this,s.setup=function(a){var i;if(!ct&&((i=window)!=null&&i.addEventListener)){var o=function(){return a()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},s}var r=t.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},r.setEventListener=function(a){var i,o=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(l){typeof l=="boolean"?o.setFocused(l):o.onFocus()})},r.setFocused=function(a){this.focused=a,a&&this.onFocus()},r.onFocus=function(){this.listeners.forEach(function(a){a()})},r.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}($e),He=new ur,dr=function(e){Me(t,e);function t(){var s;return s=e.call(this)||this,s.setup=function(a){var i;if(!ct&&((i=window)!=null&&i.addEventListener)){var o=function(){return a()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},s}var r=t.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},r.setEventListener=function(a){var i,o=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(l){typeof l=="boolean"?o.setOnline(l):o.onOnline()})},r.setOnline=function(a){this.online=a,a&&this.onOnline()},r.onOnline=function(){this.listeners.forEach(function(a){a()})},r.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}($e),nt=new dr;function hr(e){return Math.min(1e3*Math.pow(2,e),3e4)}function ft(e){return typeof(e==null?void 0:e.cancel)=="function"}var Bs=function(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent};function rt(e){return e instanceof Bs}var Hs=function(t){var r=this,s=!1,a,i,o,l;this.abort=t.abort,this.cancel=function(b){return a==null?void 0:a(b)},this.cancelRetry=function(){s=!0},this.continueRetry=function(){s=!1},this.continue=function(){return i==null?void 0:i()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(b,v){o=b,l=v});var c=function(v){r.isResolved||(r.isResolved=!0,t.onSuccess==null||t.onSuccess(v),i==null||i(),o(v))},u=function(v){r.isResolved||(r.isResolved=!0,t.onError==null||t.onError(v),i==null||i(),l(v))},h=function(){return new Promise(function(v){i=v,r.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){i=void 0,r.isPaused=!1,t.onContinue==null||t.onContinue()})},f=function b(){if(!r.isResolved){var v;try{v=t.fn()}catch(m){v=Promise.reject(m)}a=function(g){if(!r.isResolved&&(u(new Bs(g)),r.abort==null||r.abort(),ft(v)))try{v.cancel()}catch{}},r.isTransportCancelable=ft(v),Promise.resolve(v).then(c).catch(function(m){var g,j;if(!r.isResolved){var E=(g=t.retry)!=null?g:3,R=(j=t.retryDelay)!=null?j:hr,y=typeof R=="function"?R(r.failureCount,m):R,p=E===!0||typeof E=="number"&&r.failureCount<E||typeof E=="function"&&E(r.failureCount,m);if(s||!p){u(m);return}r.failureCount++,t.onFail==null||t.onFail(r.failureCount,m),cr(y).then(function(){if(!He.isFocused()||!nt.isOnline())return h()}).then(function(){s?u(m):b()})}})}};f()},fr=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(r){r()},this.batchNotifyFn=function(r){r()}}var t=e.prototype;return t.batch=function(s){var a;this.transactions++;try{a=s()}finally{this.transactions--,this.transactions||this.flush()}return a},t.schedule=function(s){var a=this;this.transactions?this.queue.push(s):ds(function(){a.notifyFn(s)})},t.batchCalls=function(s){var a=this;return function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];a.schedule(function(){s.apply(void 0,o)})}},t.flush=function(){var s=this,a=this.queue;this.queue=[],a.length&&ds(function(){s.batchNotifyFn(function(){a.forEach(function(i){s.notifyFn(i)})})})},t.setNotifyFunction=function(s){this.notifyFn=s},t.setBatchNotifyFunction=function(s){this.batchNotifyFn=s},e}(),V=new fr,Ks=console;function mt(){return Ks}function mr(e){Ks=e}var pr=function(){function e(r){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.cache=r.cache,this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.initialState=r.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=r.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(s){var a;this.options=$({},this.defaultOptions,s),this.meta=s==null?void 0:s.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},t.setDefaultOptions=function(s){this.defaultOptions=s},t.scheduleGc=function(){var s=this;this.clearGcTimeout(),Lt(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){s.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(s,a){var i,o,l=this.state.data,c=rr(s,l);return(i=(o=this.options).isDataEqual)!=null&&i.call(o,l,c)?c=l:this.options.structuralSharing!==!1&&(c=ht(l,c)),this.dispatch({data:c,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt}),c},t.setState=function(s,a){this.dispatch({type:"setState",state:s,setStateOptions:a})},t.cancel=function(s){var a,i=this.promise;return(a=this.retryer)==null||a.cancel(s),i?i.then(te).catch(te):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(s){return s.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(s){return s.getCurrentResult().isStale})},t.isStaleByTime=function(s){return s===void 0&&(s=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Us(this.state.dataUpdatedAt,s)},t.onFocus=function(){var s,a=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});a&&a.refetch(),(s=this.retryer)==null||s.continue()},t.onOnline=function(){var s,a=this.observers.find(function(i){return i.shouldFetchOnReconnect()});a&&a.refetch(),(s=this.retryer)==null||s.continue()},t.addObserver=function(s){this.observers.indexOf(s)===-1&&(this.observers.push(s),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:s}))},t.removeObserver=function(s){this.observers.indexOf(s)!==-1&&(this.observers=this.observers.filter(function(a){return a!==s}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:s}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(s,a){var i=this,o,l,c;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(s&&this.setOptions(s),!this.options.queryFn){var h=this.observers.find(function(R){return R.options.queryFn});h&&this.setOptions(h.options)}var f=ut(this.queryKey),b=Qs(),v={queryKey:f,pageParam:void 0,meta:this.meta};Object.defineProperty(v,"signal",{enumerable:!0,get:function(){if(b)return i.abortSignalConsumed=!0,b.signal}});var m=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(v)):Promise.reject("Missing queryFn")},g={fetchOptions:a,options:this.options,queryKey:f,state:this.state,fetchFn:m,meta:this.meta};if((o=this.options.behavior)!=null&&o.onFetch){var j;(j=this.options.behavior)==null||j.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((l=g.fetchOptions)==null?void 0:l.meta)){var E;this.dispatch({type:"fetch",meta:(E=g.fetchOptions)==null?void 0:E.meta})}return this.retryer=new Hs({fn:g.fetchFn,abort:b==null||(c=b.abort)==null?void 0:c.bind(b),onSuccess:function(y){i.setData(y),i.cache.config.onSuccess==null||i.cache.config.onSuccess(y,i),i.cacheTime===0&&i.optionalRemove()},onError:function(y){rt(y)&&y.silent||i.dispatch({type:"error",error:y}),rt(y)||(i.cache.config.onError==null||i.cache.config.onError(y,i),mt().error(y)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(s){var a=this;this.state=this.reducer(this.state,s),V.batch(function(){a.observers.forEach(function(i){i.onQueryUpdate(s)}),a.cache.notify({query:a,type:"queryUpdated",action:s})})},t.getDefaultState=function(s){var a=typeof s.initialData=="function"?s.initialData():s.initialData,i=typeof s.initialData<"u",o=i?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0,l=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:l?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:l?"success":"idle"}},t.reducer=function(s,a){var i,o;switch(a.type){case"failed":return $({},s,{fetchFailureCount:s.fetchFailureCount+1});case"pause":return $({},s,{isPaused:!0});case"continue":return $({},s,{isPaused:!1});case"fetch":return $({},s,{fetchFailureCount:0,fetchMeta:(i=a.meta)!=null?i:null,isFetching:!0,isPaused:!1},!s.dataUpdatedAt&&{error:null,status:"loading"});case"success":return $({},s,{data:a.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(o=a.dataUpdatedAt)!=null?o:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var l=a.error;return rt(l)&&l.revert&&this.revertState?$({},this.revertState):$({},s,{error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return $({},s,{isInvalidated:!0});case"setState":return $({},s,a.state);default:return s}},e}(),xr=function(e){Me(t,e);function t(s){var a;return a=e.call(this)||this,a.config=s||{},a.queries=[],a.queriesMap={},a}var r=t.prototype;return r.build=function(a,i,o){var l,c=i.queryKey,u=(l=i.queryHash)!=null?l:Ht(c,i),h=this.get(u);return h||(h=new pr({cache:this,queryKey:c,queryHash:u,options:a.defaultQueryOptions(i),state:o,defaultOptions:a.getQueryDefaults(c),meta:i.meta}),this.add(h)),h},r.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},r.remove=function(a){var i=this.queriesMap[a.queryHash];i&&(a.destroy(),this.queries=this.queries.filter(function(o){return o!==a}),i===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},r.clear=function(){var a=this;V.batch(function(){a.queries.forEach(function(i){a.remove(i)})})},r.get=function(a){return this.queriesMap[a]},r.getAll=function(){return this.queries},r.find=function(a,i){var o=we(a,i),l=o[0];return typeof l.exact>"u"&&(l.exact=!0),this.queries.find(function(c){return ls(l,c)})},r.findAll=function(a,i){var o=we(a,i),l=o[0];return Object.keys(l).length>0?this.queries.filter(function(c){return ls(l,c)}):this.queries},r.notify=function(a){var i=this;V.batch(function(){i.listeners.forEach(function(o){o(a)})})},r.onFocus=function(){var a=this;V.batch(function(){a.queries.forEach(function(i){i.onFocus()})})},r.onOnline=function(){var a=this;V.batch(function(){a.queries.forEach(function(i){i.onOnline()})})},t}($e),br=function(){function e(r){this.options=$({},r.defaultOptions,r.options),this.mutationId=r.mutationId,this.mutationCache=r.mutationCache,this.observers=[],this.state=r.state||Ws(),this.meta=r.meta}var t=e.prototype;return t.setState=function(s){this.dispatch({type:"setState",state:s})},t.addObserver=function(s){this.observers.indexOf(s)===-1&&this.observers.push(s)},t.removeObserver=function(s){this.observers=this.observers.filter(function(a){return a!==s})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(te).catch(te)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var s=this,a,i=this.state.status==="loading",o=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){s.mutationCache.config.onMutate==null||s.mutationCache.config.onMutate(s.state.variables,s)}).then(function(){return s.options.onMutate==null?void 0:s.options.onMutate(s.state.variables)}).then(function(l){l!==s.state.context&&s.dispatch({type:"loading",context:l,variables:s.state.variables})})),o.then(function(){return s.executeMutation()}).then(function(l){a=l,s.mutationCache.config.onSuccess==null||s.mutationCache.config.onSuccess(a,s.state.variables,s.state.context,s)}).then(function(){return s.options.onSuccess==null?void 0:s.options.onSuccess(a,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(a,null,s.state.variables,s.state.context)}).then(function(){return s.dispatch({type:"success",data:a}),a}).catch(function(l){return s.mutationCache.config.onError==null||s.mutationCache.config.onError(l,s.state.variables,s.state.context,s),mt().error(l),Promise.resolve().then(function(){return s.options.onError==null?void 0:s.options.onError(l,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(void 0,l,s.state.variables,s.state.context)}).then(function(){throw s.dispatch({type:"error",error:l}),l})})},t.executeMutation=function(){var s=this,a;return this.retryer=new Hs({fn:function(){return s.options.mutationFn?s.options.mutationFn(s.state.variables):Promise.reject("No mutationFn found")},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(s){var a=this;this.state=gr(this.state,s),V.batch(function(){a.observers.forEach(function(i){i.onMutationUpdate(s)}),a.mutationCache.notify(a)})},e}();function Ws(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function gr(e,t){switch(t.type){case"failed":return $({},e,{failureCount:e.failureCount+1});case"pause":return $({},e,{isPaused:!0});case"continue":return $({},e,{isPaused:!1});case"loading":return $({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return $({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return $({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return $({},e,t.state);default:return e}}var yr=function(e){Me(t,e);function t(s){var a;return a=e.call(this)||this,a.config=s||{},a.mutations=[],a.mutationId=0,a}var r=t.prototype;return r.build=function(a,i,o){var l=new br({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(i),state:o,defaultOptions:i.mutationKey?a.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(l),l},r.add=function(a){this.mutations.push(a),this.notify(a)},r.remove=function(a){this.mutations=this.mutations.filter(function(i){return i!==a}),a.cancel(),this.notify(a)},r.clear=function(){var a=this;V.batch(function(){a.mutations.forEach(function(i){a.remove(i)})})},r.getAll=function(){return this.mutations},r.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(i){return cs(a,i)})},r.findAll=function(a){return this.mutations.filter(function(i){return cs(a,i)})},r.notify=function(a){var i=this;V.batch(function(){i.listeners.forEach(function(o){o(a)})})},r.onFocus=function(){this.resumePausedMutations()},r.onOnline=function(){this.resumePausedMutations()},r.resumePausedMutations=function(){var a=this.mutations.filter(function(i){return i.state.isPaused});return V.batch(function(){return a.reduce(function(i,o){return i.then(function(){return o.continue().catch(te)})},Promise.resolve())})},t}($e);function vr(){return{onFetch:function(t){t.fetchFn=function(){var r,s,a,i,o,l,c=(r=t.fetchOptions)==null||(s=r.meta)==null?void 0:s.refetchPage,u=(a=t.fetchOptions)==null||(i=a.meta)==null?void 0:i.fetchMore,h=u==null?void 0:u.pageParam,f=(u==null?void 0:u.direction)==="forward",b=(u==null?void 0:u.direction)==="backward",v=((o=t.state.data)==null?void 0:o.pages)||[],m=((l=t.state.data)==null?void 0:l.pageParams)||[],g=Qs(),j=g==null?void 0:g.signal,E=m,R=!1,y=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},p=function(H,F,D,re){return E=re?[F].concat(E):[].concat(E,[F]),re?[D].concat(H):[].concat(H,[D])},O=function(H,F,D,re){if(R)return Promise.reject("Cancelled");if(typeof D>"u"&&!F&&H.length)return Promise.resolve(H);var M={queryKey:t.queryKey,signal:j,pageParam:D,meta:t.meta},J=y(M),ce=Promise.resolve(J).then(function(ae){return p(H,D,ae,re)});if(ft(J)){var Z=ce;Z.cancel=J.cancel}return ce},C;if(!v.length)C=O([]);else if(f){var N=typeof h<"u",U=N?h:hs(t.options,v);C=O(v,N,U)}else if(b){var W=typeof h<"u",T=W?h:jr(t.options,v);C=O(v,W,T,!0)}else(function(){E=[];var P=typeof t.options.getNextPageParam>"u",H=c&&v[0]?c(v[0],0,v):!0;C=H?O([],P,m[0]):Promise.resolve(p([],m[0],v[0]));for(var F=function(M){C=C.then(function(J){var ce=c&&v[M]?c(v[M],M,v):!0;if(ce){var Z=P?m[M]:hs(t.options,J);return O(J,P,Z)}return Promise.resolve(p(J,m[M],v[M]))})},D=1;D<v.length;D++)F(D)})();var B=C.then(function(P){return{pages:P,pageParams:E}}),Q=B;return Q.cancel=function(){R=!0,g==null||g.abort(),ft(C)&&C.cancel()},B}}}}function hs(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function jr(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var Nr=function(){function e(r){r===void 0&&(r={}),this.queryCache=r.queryCache||new xr,this.mutationCache=r.mutationCache||new yr,this.defaultOptions=r.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var s=this;this.unsubscribeFocus=He.subscribe(function(){He.isFocused()&&nt.isOnline()&&(s.mutationCache.onFocus(),s.queryCache.onFocus())}),this.unsubscribeOnline=nt.subscribe(function(){He.isFocused()&&nt.isOnline()&&(s.mutationCache.onOnline(),s.queryCache.onOnline())})},t.unmount=function(){var s,a;(s=this.unsubscribeFocus)==null||s.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},t.isFetching=function(s,a){var i=we(s,a),o=i[0];return o.fetching=!0,this.queryCache.findAll(o).length},t.isMutating=function(s){return this.mutationCache.findAll($({},s,{fetching:!0})).length},t.getQueryData=function(s,a){var i;return(i=this.queryCache.find(s,a))==null?void 0:i.state.data},t.getQueriesData=function(s){return this.getQueryCache().findAll(s).map(function(a){var i=a.queryKey,o=a.state,l=o.data;return[i,l]})},t.setQueryData=function(s,a,i){var o=st(s),l=this.defaultQueryOptions(o);return this.queryCache.build(this,l).setData(a,i)},t.setQueriesData=function(s,a,i){var o=this;return V.batch(function(){return o.getQueryCache().findAll(s).map(function(l){var c=l.queryKey;return[c,o.setQueryData(c,a,i)]})})},t.getQueryState=function(s,a){var i;return(i=this.queryCache.find(s,a))==null?void 0:i.state},t.removeQueries=function(s,a){var i=we(s,a),o=i[0],l=this.queryCache;V.batch(function(){l.findAll(o).forEach(function(c){l.remove(c)})})},t.resetQueries=function(s,a,i){var o=this,l=we(s,a,i),c=l[0],u=l[1],h=this.queryCache,f=$({},c,{active:!0});return V.batch(function(){return h.findAll(c).forEach(function(b){b.reset()}),o.refetchQueries(f,u)})},t.cancelQueries=function(s,a,i){var o=this,l=we(s,a,i),c=l[0],u=l[1],h=u===void 0?{}:u;typeof h.revert>"u"&&(h.revert=!0);var f=V.batch(function(){return o.queryCache.findAll(c).map(function(b){return b.cancel(h)})});return Promise.all(f).then(te).catch(te)},t.invalidateQueries=function(s,a,i){var o,l,c,u=this,h=we(s,a,i),f=h[0],b=h[1],v=$({},f,{active:(o=(l=f.refetchActive)!=null?l:f.active)!=null?o:!0,inactive:(c=f.refetchInactive)!=null?c:!1});return V.batch(function(){return u.queryCache.findAll(f).forEach(function(m){m.invalidate()}),u.refetchQueries(v,b)})},t.refetchQueries=function(s,a,i){var o=this,l=we(s,a,i),c=l[0],u=l[1],h=V.batch(function(){return o.queryCache.findAll(c).map(function(b){return b.fetch(void 0,$({},u,{meta:{refetchPage:c==null?void 0:c.refetchPage}}))})}),f=Promise.all(h).then(te);return u!=null&&u.throwOnError||(f=f.catch(te)),f},t.fetchQuery=function(s,a,i){var o=st(s,a,i),l=this.defaultQueryOptions(o);typeof l.retry>"u"&&(l.retry=!1);var c=this.queryCache.build(this,l);return c.isStaleByTime(l.staleTime)?c.fetch(l):Promise.resolve(c.state.data)},t.prefetchQuery=function(s,a,i){return this.fetchQuery(s,a,i).then(te).catch(te)},t.fetchInfiniteQuery=function(s,a,i){var o=st(s,a,i);return o.behavior=vr(),this.fetchQuery(o)},t.prefetchInfiniteQuery=function(s,a,i){return this.fetchInfiniteQuery(s,a,i).then(te).catch(te)},t.cancelMutations=function(){var s=this,a=V.batch(function(){return s.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(a).then(te).catch(te)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(s){return this.mutationCache.build(this,s).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(s){this.defaultOptions=s},t.setQueryDefaults=function(s,a){var i=this.queryDefaults.find(function(o){return ke(s)===ke(o.queryKey)});i?i.defaultOptions=a:this.queryDefaults.push({queryKey:s,defaultOptions:a})},t.getQueryDefaults=function(s){var a;return s?(a=this.queryDefaults.find(function(i){return dt(s,i.queryKey)}))==null?void 0:a.defaultOptions:void 0},t.setMutationDefaults=function(s,a){var i=this.mutationDefaults.find(function(o){return ke(s)===ke(o.mutationKey)});i?i.defaultOptions=a:this.mutationDefaults.push({mutationKey:s,defaultOptions:a})},t.getMutationDefaults=function(s){var a;return s?(a=this.mutationDefaults.find(function(i){return dt(s,i.mutationKey)}))==null?void 0:a.defaultOptions:void 0},t.defaultQueryOptions=function(s){if(s!=null&&s._defaulted)return s;var a=$({},this.defaultOptions.queries,this.getQueryDefaults(s==null?void 0:s.queryKey),s,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=Ht(a.queryKey,a)),a},t.defaultQueryObserverOptions=function(s){return this.defaultQueryOptions(s)},t.defaultMutationOptions=function(s){return s!=null&&s._defaulted?s:$({},this.defaultOptions.mutations,this.getMutationDefaults(s==null?void 0:s.mutationKey),s,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),wr=function(e){Me(t,e);function t(s,a){var i;return i=e.call(this)||this,i.client=s,i.options=a,i.trackedProps=[],i.selectError=null,i.bindMethods(),i.setOptions(a),i}var r=t.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),fs(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return Mt(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return Mt(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(a,i){var o=this.options,l=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(a),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var c=this.hasListeners();c&&ms(this.currentQuery,l,this.options,o)&&this.executeFetch(),this.updateResult(i),c&&(this.currentQuery!==l||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var u=this.computeRefetchInterval();c&&(this.currentQuery!==l||this.options.enabled!==o.enabled||u!==this.currentRefetchInterval)&&this.updateRefetchInterval(u)},r.getOptimisticResult=function(a){var i=this.client.defaultQueryObserverOptions(a),o=this.client.getQueryCache().build(this.client,i);return this.createResult(o,i)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(a,i){var o=this,l={},c=function(h){o.trackedProps.includes(h)||o.trackedProps.push(h)};return Object.keys(a).forEach(function(u){Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:function(){return c(u),a[u]}})}),(i.useErrorBoundary||i.suspense)&&c("error"),l},r.getNextResult=function(a){var i=this;return new Promise(function(o,l){var c=i.subscribe(function(u){u.isFetching||(c(),u.isError&&(a!=null&&a.throwOnError)?l(u.error):o(u))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(a){return this.fetch($({},a,{meta:{refetchPage:a==null?void 0:a.refetchPage}}))},r.fetchOptimistic=function(a){var i=this,o=this.client.defaultQueryObserverOptions(a),l=this.client.getQueryCache().build(this.client,o);return l.fetch().then(function(){return i.createResult(l,o)})},r.fetch=function(a){var i=this;return this.executeFetch(a).then(function(){return i.updateResult(),i.currentResult})},r.executeFetch=function(a){this.updateQuery();var i=this.currentQuery.fetch(this.options,a);return a!=null&&a.throwOnError||(i=i.catch(te)),i},r.updateStaleTimeout=function(){var a=this;if(this.clearStaleTimeout(),!(ct||this.currentResult.isStale||!Lt(this.options.staleTime))){var i=Us(this.currentResult.dataUpdatedAt,this.options.staleTime),o=i+1;this.staleTimeoutId=setTimeout(function(){a.currentResult.isStale||a.updateResult()},o)}},r.computeRefetchInterval=function(){var a;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(a=this.options.refetchInterval)!=null?a:!1},r.updateRefetchInterval=function(a){var i=this;this.clearRefetchInterval(),this.currentRefetchInterval=a,!(ct||this.options.enabled===!1||!Lt(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(i.options.refetchIntervalInBackground||He.isFocused())&&i.executeFetch()},this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(a,i){var o=this.currentQuery,l=this.options,c=this.currentResult,u=this.currentResultState,h=this.currentResultOptions,f=a!==o,b=f?a.state:this.currentQueryInitialState,v=f?this.currentResult:this.previousQueryResult,m=a.state,g=m.dataUpdatedAt,j=m.error,E=m.errorUpdatedAt,R=m.isFetching,y=m.status,p=!1,O=!1,C;if(i.optimisticResults){var N=this.hasListeners(),U=!N&&fs(a,i),W=N&&ms(a,o,i,l);(U||W)&&(R=!0,g||(y="loading"))}if(i.keepPreviousData&&!m.dataUpdateCount&&(v!=null&&v.isSuccess)&&y!=="error")C=v.data,g=v.dataUpdatedAt,y=v.status,p=!0;else if(i.select&&typeof m.data<"u")if(c&&m.data===(u==null?void 0:u.data)&&i.select===this.selectFn)C=this.selectResult;else try{this.selectFn=i.select,C=i.select(m.data),i.structuralSharing!==!1&&(C=ht(c==null?void 0:c.data,C)),this.selectResult=C,this.selectError=null}catch(Q){mt().error(Q),this.selectError=Q}else C=m.data;if(typeof i.placeholderData<"u"&&typeof C>"u"&&(y==="loading"||y==="idle")){var T;if(c!=null&&c.isPlaceholderData&&i.placeholderData===(h==null?void 0:h.placeholderData))T=c.data;else if(T=typeof i.placeholderData=="function"?i.placeholderData():i.placeholderData,i.select&&typeof T<"u")try{T=i.select(T),i.structuralSharing!==!1&&(T=ht(c==null?void 0:c.data,T)),this.selectError=null}catch(Q){mt().error(Q),this.selectError=Q}typeof T<"u"&&(y="success",C=T,O=!0)}this.selectError&&(j=this.selectError,C=this.selectResult,E=Date.now(),y="error");var B={status:y,isLoading:y==="loading",isSuccess:y==="success",isError:y==="error",isIdle:y==="idle",data:C,dataUpdatedAt:g,error:j,errorUpdatedAt:E,failureCount:m.fetchFailureCount,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>b.dataUpdateCount||m.errorUpdateCount>b.errorUpdateCount,isFetching:R,isRefetching:R&&y!=="loading",isLoadingError:y==="error"&&m.dataUpdatedAt===0,isPlaceholderData:O,isPreviousData:p,isRefetchError:y==="error"&&m.dataUpdatedAt!==0,isStale:Kt(a,i),refetch:this.refetch,remove:this.remove};return B},r.shouldNotifyListeners=function(a,i){if(!i)return!0;var o=this.options,l=o.notifyOnChangeProps,c=o.notifyOnChangePropsExclusions;if(!l&&!c||l==="tracked"&&!this.trackedProps.length)return!0;var u=l==="tracked"?this.trackedProps:l;return Object.keys(a).some(function(h){var f=h,b=a[f]!==i[f],v=u==null?void 0:u.some(function(g){return g===h}),m=c==null?void 0:c.some(function(g){return g===h});return b&&!m&&(!u||v)})},r.updateResult=function(a){var i=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!lr(this.currentResult,i)){var o={cache:!0};(a==null?void 0:a.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,i)&&(o.listeners=!0),this.notify($({},o,a))}},r.updateQuery=function(){var a=this.client.getQueryCache().build(this.client,this.options);if(a!==this.currentQuery){var i=this.currentQuery;this.currentQuery=a,this.currentQueryInitialState=a.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(i==null||i.removeObserver(this),a.addObserver(this))}},r.onQueryUpdate=function(a){var i={};a.type==="success"?i.onSuccess=!0:a.type==="error"&&!rt(a.error)&&(i.onError=!0),this.updateResult(i),this.hasListeners()&&this.updateTimers()},r.notify=function(a){var i=this;V.batch(function(){a.onSuccess?(i.options.onSuccess==null||i.options.onSuccess(i.currentResult.data),i.options.onSettled==null||i.options.onSettled(i.currentResult.data,null)):a.onError&&(i.options.onError==null||i.options.onError(i.currentResult.error),i.options.onSettled==null||i.options.onSettled(void 0,i.currentResult.error)),a.listeners&&i.listeners.forEach(function(o){o(i.currentResult)}),a.cache&&i.client.getQueryCache().notify({query:i.currentQuery,type:"observerResultsUpdated"})})},t}($e);function Sr(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function fs(e,t){return Sr(e,t)||e.state.dataUpdatedAt>0&&Mt(e,t,t.refetchOnMount)}function Mt(e,t,r){if(t.enabled!==!1){var s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&Kt(e,t)}return!1}function ms(e,t,r,s){return r.enabled!==!1&&(e!==t||s.enabled===!1)&&(!r.suspense||e.state.status!=="error")&&Kt(e,r)}function Kt(e,t){return e.isStaleByTime(t.staleTime)}var Cr=function(e){Me(t,e);function t(s,a){var i;return i=e.call(this)||this,i.client=s,i.setOptions(a),i.bindMethods(),i.updateResult(),i}var r=t.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(a){this.options=this.client.defaultMutationOptions(a)},r.onUnsubscribe=function(){if(!this.listeners.length){var a;(a=this.currentMutation)==null||a.removeObserver(this)}},r.onMutationUpdate=function(a){this.updateResult();var i={listeners:!0};a.type==="success"?i.onSuccess=!0:a.type==="error"&&(i.onError=!0),this.notify(i)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(a,i){return this.mutateOptions=i,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,$({},this.options,{variables:typeof a<"u"?a:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var a=this.currentMutation?this.currentMutation.state:Ws(),i=$({},a,{isLoading:a.status==="loading",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=i},r.notify=function(a){var i=this;V.batch(function(){i.mutateOptions&&(a.onSuccess?(i.mutateOptions.onSuccess==null||i.mutateOptions.onSuccess(i.currentResult.data,i.currentResult.variables,i.currentResult.context),i.mutateOptions.onSettled==null||i.mutateOptions.onSettled(i.currentResult.data,null,i.currentResult.variables,i.currentResult.context)):a.onError&&(i.mutateOptions.onError==null||i.mutateOptions.onError(i.currentResult.error,i.currentResult.variables,i.currentResult.context),i.mutateOptions.onSettled==null||i.mutateOptions.onSettled(void 0,i.currentResult.error,i.currentResult.variables,i.currentResult.context))),a.listeners&&i.listeners.forEach(function(o){o(i.currentResult)})})},t}($e),kr=Hn.unstable_batchedUpdates;V.setBatchNotifyFunction(kr);var Er=console;mr(Er);var ps=X.createContext(void 0),zs=X.createContext(!1);function Vs(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=ps),window.ReactQueryClientContext):ps}var de=function(){var t=X.useContext(Vs(X.useContext(zs)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Or=function(t){var r=t.client,s=t.contextSharing,a=s===void 0?!1:s,i=t.children;X.useEffect(function(){return r.mount(),function(){r.unmount()}},[r]);var o=Vs(a);return X.createElement(zs.Provider,{value:a},X.createElement(o.Provider,{value:r},i))};function Rr(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var _r=X.createContext(Rr()),Pr=function(){return X.useContext(_r)};function Js(e,t,r){return typeof t=="function"?t.apply(void 0,r):typeof t=="boolean"?t:!!e}function ee(e,t,r){var s=X.useRef(!1),a=X.useState(0),i=a[1],o=ar(e,t,r),l=de(),c=X.useRef();c.current?c.current.setOptions(o):c.current=new Cr(l,o);var u=c.current.getCurrentResult();X.useEffect(function(){s.current=!0;var f=c.current.subscribe(V.batchCalls(function(){s.current&&i(function(b){return b+1})}));return function(){s.current=!1,f()}},[]);var h=X.useCallback(function(f,b){c.current.mutate(f,b).catch(te)},[]);if(u.error&&Js(void 0,c.current.options.useErrorBoundary,[u.error]))throw u.error;return $({},u,{mutate:h,mutateAsync:u.mutate})}function Fr(e,t){var r=X.useRef(!1),s=X.useState(0),a=s[1],i=de(),o=Pr(),l=i.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=V.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=V.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=V.batchCalls(l.onSettled)),l.suspense&&(typeof l.staleTime!="number"&&(l.staleTime=1e3),l.cacheTime===0&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(o.isReset()||(l.retryOnMount=!1));var c=X.useState(function(){return new t(i,l)}),u=c[0],h=u.getOptimisticResult(l);if(X.useEffect(function(){r.current=!0,o.clearReset();var f=u.subscribe(V.batchCalls(function(){r.current&&a(function(b){return b+1})}));return u.updateResult(),function(){r.current=!1,f()}},[o,u]),X.useEffect(function(){u.setOptions(l,{listeners:!1})},[l,u]),l.suspense&&h.isLoading)throw u.fetchOptimistic(l).then(function(f){var b=f.data;l.onSuccess==null||l.onSuccess(b),l.onSettled==null||l.onSettled(b,null)}).catch(function(f){o.clearReset(),l.onError==null||l.onError(f),l.onSettled==null||l.onSettled(void 0,f)});if(h.isError&&!o.isReset()&&!h.isFetching&&Js(l.suspense,l.useErrorBoundary,[h.error,u.getCurrentQuery()]))throw h.error;return l.notifyOnChangeProps==="tracked"&&(h=u.trackResult(h,l)),h}function ne(e,t,r){var s=st(e,t,r);return Fr(s,wr)}function Gs(e,t){return function(){return e.apply(t,arguments)}}const{toString:Tr}=Object.prototype,{getPrototypeOf:Wt}=Object,{iterator:bt,toStringTag:Ys}=Symbol,gt=(e=>t=>{const r=Tr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),he=e=>(e=e.toLowerCase(),t=>gt(t)===e),yt=e=>t=>typeof t===e,{isArray:Ie}=Array,Le=yt("undefined");function ze(e){return e!==null&&!Le(e)&&e.constructor!==null&&!Le(e.constructor)&&oe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Xs=he("ArrayBuffer");function Ar(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Xs(e.buffer),t}const Lr=yt("string"),oe=yt("function"),Zs=yt("number"),Ve=e=>e!==null&&typeof e=="object",Dr=e=>e===!0||e===!1,at=e=>{if(gt(e)!=="object")return!1;const t=Wt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ys in e)&&!(bt in e)},Mr=e=>{if(!Ve(e)||ze(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},$r=he("Date"),Ir=he("File"),Ur=he("Blob"),qr=he("FileList"),Qr=e=>Ve(e)&&oe(e.pipe),Br=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||oe(e.append)&&((t=gt(e))==="formdata"||t==="object"&&oe(e.toString)&&e.toString()==="[object FormData]"))},Hr=he("URLSearchParams"),[Kr,Wr,zr,Vr]=["ReadableStream","Request","Response","Headers"].map(he),Jr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Je(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),Ie(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if(ze(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function en(e,t){if(ze(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const Ee=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tn=e=>!Le(e)&&e!==Ee;function $t(){const{caseless:e,skipUndefined:t}=tn(this)&&this||{},r={},s=(a,i)=>{const o=e&&en(r,i)||i;at(r[o])&&at(a)?r[o]=$t(r[o],a):at(a)?r[o]=$t({},a):Ie(a)?r[o]=a.slice():(!t||!Le(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Je(arguments[a],s);return r}const Gr=(e,t,r,{allOwnKeys:s}={})=>(Je(t,(a,i)=>{r&&oe(a)?e[i]=Gs(a,r):e[i]=a},{allOwnKeys:s}),e),Yr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Xr=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Zr=(e,t,r,s)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&Wt(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},ea=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},ta=e=>{if(!e)return null;if(Ie(e))return e;let t=e.length;if(!Zs(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},sa=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Wt(Uint8Array)),na=(e,t)=>{const s=(e&&e[bt]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},ra=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},aa=he("HTMLFormElement"),ia=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),xs=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),oa=he("RegExp"),sn=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Je(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(s[i]=o||a)}),Object.defineProperties(e,s)},la=e=>{sn(e,(t,r)=>{if(oe(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(oe(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ca=(e,t)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return Ie(e)?s(e):s(String(e).split(t)),r},ua=()=>{},da=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ha(e){return!!(e&&oe(e.append)&&e[Ys]==="FormData"&&e[bt])}const fa=e=>{const t=new Array(10),r=(s,a)=>{if(Ve(s)){if(t.indexOf(s)>=0)return;if(ze(s))return s;if(!("toJSON"in s)){t[a]=s;const i=Ie(s)?[]:{};return Je(s,(o,l)=>{const c=r(o,a+1);!Le(c)&&(i[l]=c)}),t[a]=void 0,i}}return s};return r(e,0)},ma=he("AsyncFunction"),pa=e=>e&&(Ve(e)||oe(e))&&oe(e.then)&&oe(e.catch),nn=((e,t)=>e?setImmediate:t?((r,s)=>(Ee.addEventListener("message",({source:a,data:i})=>{a===Ee&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),Ee.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",oe(Ee.postMessage)),xa=typeof queueMicrotask<"u"?queueMicrotask.bind(Ee):typeof process<"u"&&process.nextTick||nn,ba=e=>e!=null&&oe(e[bt]),x={isArray:Ie,isArrayBuffer:Xs,isBuffer:ze,isFormData:Br,isArrayBufferView:Ar,isString:Lr,isNumber:Zs,isBoolean:Dr,isObject:Ve,isPlainObject:at,isEmptyObject:Mr,isReadableStream:Kr,isRequest:Wr,isResponse:zr,isHeaders:Vr,isUndefined:Le,isDate:$r,isFile:Ir,isBlob:Ur,isRegExp:oa,isFunction:oe,isStream:Qr,isURLSearchParams:Hr,isTypedArray:sa,isFileList:qr,forEach:Je,merge:$t,extend:Gr,trim:Jr,stripBOM:Yr,inherits:Xr,toFlatObject:Zr,kindOf:gt,kindOfTest:he,endsWith:ea,toArray:ta,forEachEntry:na,matchAll:ra,isHTMLForm:aa,hasOwnProperty:xs,hasOwnProp:xs,reduceDescriptors:sn,freezeMethods:la,toObjectSet:ca,toCamelCase:ia,noop:ua,toFiniteNumber:da,findKey:en,global:Ee,isContextDefined:tn,isSpecCompliantForm:ha,toJSONObject:fa,isAsyncFn:ma,isThenable:pa,setImmediate:nn,asap:xa,isIterable:ba};function L(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}x.inherits(L,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}});const rn=L.prototype,an={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{an[e]={value:e}});Object.defineProperties(L,an);Object.defineProperty(rn,"isAxiosError",{value:!0});L.from=(e,t,r,s,a,i)=>{const o=Object.create(rn);x.toFlatObject(e,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return L.call(o,l,c,r,s,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const ga=null;function It(e){return x.isPlainObject(e)||x.isArray(e)}function on(e){return x.endsWith(e,"[]")?e.slice(0,-2):e}function bs(e,t,r){return e?e.concat(t).map(function(a,i){return a=on(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function ya(e){return x.isArray(e)&&!e.some(It)}const va=x.toFlatObject(x,{},null,function(t){return/^is[A-Z]/.test(t)});function vt(e,t,r){if(!x.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=x.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,j){return!x.isUndefined(j[g])});const s=r.metaTokens,a=r.visitor||h,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(t);if(!x.isFunction(a))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(x.isDate(m))return m.toISOString();if(x.isBoolean(m))return m.toString();if(!c&&x.isBlob(m))throw new L("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(m)||x.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function h(m,g,j){let E=m;if(m&&!j&&typeof m=="object"){if(x.endsWith(g,"{}"))g=s?g:g.slice(0,-2),m=JSON.stringify(m);else if(x.isArray(m)&&ya(m)||(x.isFileList(m)||x.endsWith(g,"[]"))&&(E=x.toArray(m)))return g=on(g),E.forEach(function(y,p){!(x.isUndefined(y)||y===null)&&t.append(o===!0?bs([g],p,i):o===null?g:g+"[]",u(y))}),!1}return It(m)?!0:(t.append(bs(j,g,i),u(m)),!1)}const f=[],b=Object.assign(va,{defaultVisitor:h,convertValue:u,isVisitable:It});function v(m,g){if(!x.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(m),x.forEach(m,function(E,R){(!(x.isUndefined(E)||E===null)&&a.call(t,E,x.isString(R)?R.trim():R,g,b))===!0&&v(E,g?g.concat(R):[R])}),f.pop()}}if(!x.isObject(e))throw new TypeError("data must be an object");return v(e),t}function gs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function zt(e,t){this._pairs=[],e&&vt(e,this,t)}const ln=zt.prototype;ln.append=function(t,r){this._pairs.push([t,r])};ln.toString=function(t){const r=t?function(s){return t.call(this,s,gs)}:gs;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function ja(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function cn(e,t,r){if(!t)return e;const s=r&&r.encode||ja;x.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=x.isURLSearchParams(t)?t.toString():new zt(t,r).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class ys{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){x.forEach(this.handlers,function(s){s!==null&&t(s)})}}const un={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Na=typeof URLSearchParams<"u"?URLSearchParams:zt,wa=typeof FormData<"u"?FormData:null,Sa=typeof Blob<"u"?Blob:null,Ca={isBrowser:!0,classes:{URLSearchParams:Na,FormData:wa,Blob:Sa},protocols:["http","https","file","blob","url","data"]},Vt=typeof window<"u"&&typeof document<"u",Ut=typeof navigator=="object"&&navigator||void 0,ka=Vt&&(!Ut||["ReactNative","NativeScript","NS"].indexOf(Ut.product)<0),Ea=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Oa=Vt&&window.location.href||"http://localhost",Ra=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vt,hasStandardBrowserEnv:ka,hasStandardBrowserWebWorkerEnv:Ea,navigator:Ut,origin:Oa},Symbol.toStringTag,{value:"Module"})),se={...Ra,...Ca};function _a(e,t){return vt(e,new se.classes.URLSearchParams,{visitor:function(r,s,a,i){return se.isNode&&x.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Pa(e){return x.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Fa(e){const t={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],t[i]=e[i];return t}function dn(e){function t(r,s,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&x.isArray(a)?a.length:o,c?(x.hasOwnProp(a,o)?a[o]=[a[o],s]:a[o]=s,!l):((!a[o]||!x.isObject(a[o]))&&(a[o]=[]),t(r,s,a[o],i)&&x.isArray(a[o])&&(a[o]=Fa(a[o])),!l)}if(x.isFormData(e)&&x.isFunction(e.entries)){const r={};return x.forEachEntry(e,(s,a)=>{t(Pa(s),a,r,0)}),r}return null}function Ta(e,t,r){if(x.isString(e))try{return(t||JSON.parse)(e),x.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Ge={transitional:un,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=x.isObject(t);if(i&&x.isHTMLForm(t)&&(t=new FormData(t)),x.isFormData(t))return a?JSON.stringify(dn(t)):t;if(x.isArrayBuffer(t)||x.isBuffer(t)||x.isStream(t)||x.isFile(t)||x.isBlob(t)||x.isReadableStream(t))return t;if(x.isArrayBufferView(t))return t.buffer;if(x.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return _a(t,this.formSerializer).toString();if((l=x.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return vt(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),Ta(t)):t}],transformResponse:[function(t){const r=this.transitional||Ge.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(x.isResponse(t)||x.isReadableStream(t))return t;if(t&&x.isString(t)&&(s&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?L.from(l,L.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:se.classes.FormData,Blob:se.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],e=>{Ge.headers[e]={}});const Aa=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),La=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),s=o.substring(a+1).trim(),!(!r||t[r]&&Aa[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},vs=Symbol("internals");function Be(e){return e&&String(e).trim().toLowerCase()}function it(e){return e===!1||e==null?e:x.isArray(e)?e.map(it):String(e)}function Da(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const Ma=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ct(e,t,r,s,a){if(x.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!x.isString(t)){if(x.isString(s))return t.indexOf(s)!==-1;if(x.isRegExp(s))return s.test(t)}}function $a(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Ia(e,t){const r=x.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,o){return this[s].call(this,t,a,i,o)},configurable:!0})})}let le=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function i(l,c,u){const h=Be(c);if(!h)throw new Error("header name must be a non-empty string");const f=x.findKey(a,h);(!f||a[f]===void 0||u===!0||u===void 0&&a[f]!==!1)&&(a[f||c]=it(l))}const o=(l,c)=>x.forEach(l,(u,h)=>i(u,h,c));if(x.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(x.isString(t)&&(t=t.trim())&&!Ma(t))o(La(t),r);else if(x.isObject(t)&&x.isIterable(t)){let l={},c,u;for(const h of t){if(!x.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?x.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Be(t),t){const s=x.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return Da(a);if(x.isFunction(r))return r.call(this,a,s);if(x.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Be(t),t){const s=x.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Ct(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function i(o){if(o=Be(o),o){const l=x.findKey(s,o);l&&(!r||Ct(s,s[l],l,r))&&(delete s[l],a=!0)}}return x.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!t||Ct(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,s={};return x.forEach(this,(a,i)=>{const o=x.findKey(s,i);if(o){r[o]=it(a),delete r[i];return}const l=t?$a(i):String(i).trim();l!==i&&delete r[i],r[l]=it(a),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return x.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&x.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[vs]=this[vs]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Be(o);s[l]||(Ia(a,o),s[l]=!0)}return x.isArray(t)?t.forEach(i):i(t),this}};le.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(le.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});x.freezeMethods(le);function kt(e,t){const r=this||Ge,s=t||r,a=le.from(s.headers);let i=s.data;return x.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function hn(e){return!!(e&&e.__CANCEL__)}function Ue(e,t,r){L.call(this,e??"canceled",L.ERR_CANCELED,t,r),this.name="CanceledError"}x.inherits(Ue,L,{__CANCEL__:!0});function fn(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new L("Request failed with status code "+r.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ua(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qa(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),h=s[i];o||(o=u),r[a]=c,s[a]=u;let f=i,b=0;for(;f!==a;)b+=r[f++],f=f%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),u-o<t)return;const v=h&&u-h;return v?Math.round(b*1e3/v):void 0}}function Qa(e,t){let r=0,s=1e3/t,a,i;const o=(u,h=Date.now())=>{r=h,a=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const h=Date.now(),f=h-r;f>=s?o(u,h):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},s-f)))},()=>a&&o(a)]}const pt=(e,t,r=3)=>{let s=0;const a=qa(50,250);return Qa(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=a(c),h=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},js=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Ns=e=>(...t)=>x.asap(()=>e(...t)),Ba=se.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,se.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(se.origin),se.navigator&&/(msie|trident)/i.test(se.navigator.userAgent)):()=>!0,Ha=se.hasStandardBrowserEnv?{write(e,t,r,s,a,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];x.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),x.isString(s)&&l.push(`path=${s}`),x.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),x.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ka(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Wa(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function mn(e,t,r){let s=!Ka(t);return e&&(s||r==!1)?Wa(e,t):t}const ws=e=>e instanceof le?{...e}:e;function Re(e,t){t=t||{};const r={};function s(u,h,f,b){return x.isPlainObject(u)&&x.isPlainObject(h)?x.merge.call({caseless:b},u,h):x.isPlainObject(h)?x.merge({},h):x.isArray(h)?h.slice():h}function a(u,h,f,b){if(x.isUndefined(h)){if(!x.isUndefined(u))return s(void 0,u,f,b)}else return s(u,h,f,b)}function i(u,h){if(!x.isUndefined(h))return s(void 0,h)}function o(u,h){if(x.isUndefined(h)){if(!x.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,f){if(f in t)return s(u,h);if(f in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,f)=>a(ws(u),ws(h),f,!0)};return x.forEach(Object.keys({...e,...t}),function(h){const f=c[h]||a,b=f(e[h],t[h],h);x.isUndefined(b)&&f!==l||(r[h]=b)}),r}const pn=e=>{const t=Re({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=le.from(o),t.url=cn(mn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),x.isFormData(r)){if(se.hasStandardBrowserEnv||se.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(x.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([h,f])=>{u.includes(h.toLowerCase())&&o.set(h,f)})}}if(se.hasStandardBrowserEnv&&(s&&x.isFunction(s)&&(s=s(t)),s||s!==!1&&Ba(t.url))){const c=a&&i&&Ha.read(i);c&&o.set(a,c)}return t},za=typeof XMLHttpRequest<"u",Va=za&&function(e){return new Promise(function(r,s){const a=pn(e);let i=a.data;const o=le.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,h,f,b,v,m;function g(){v&&v(),m&&m(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function E(){if(!j)return;const y=le.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),O={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:y,config:e,request:j};fn(function(N){r(N),g()},function(N){s(N),g()},O),j=null}"onloadend"in j?j.onloadend=E:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(E)},j.onabort=function(){j&&(s(new L("Request aborted",L.ECONNABORTED,e,j)),j=null)},j.onerror=function(p){const O=p&&p.message?p.message:"Network Error",C=new L(O,L.ERR_NETWORK,e,j);C.event=p||null,s(C),j=null},j.ontimeout=function(){let p=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const O=a.transitional||un;a.timeoutErrorMessage&&(p=a.timeoutErrorMessage),s(new L(p,O.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,e,j)),j=null},i===void 0&&o.setContentType(null),"setRequestHeader"in j&&x.forEach(o.toJSON(),function(p,O){j.setRequestHeader(O,p)}),x.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),l&&l!=="json"&&(j.responseType=a.responseType),u&&([b,m]=pt(u,!0),j.addEventListener("progress",b)),c&&j.upload&&([f,v]=pt(c),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(h=y=>{j&&(s(!y||y.type?new Ue(null,e,j):y),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const R=Ua(a.url);if(R&&se.protocols.indexOf(R)===-1){s(new L("Unsupported protocol "+R+":",L.ERR_BAD_REQUEST,e));return}j.send(i||null)})},Ja=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const i=function(u){if(!a){a=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof L?h:new Ue(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,i(new L(`timeout ${t} of ms exceeded`,L.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>x.asap(l),c}},Ga=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},Ya=async function*(e,t){for await(const r of Xa(e))yield*Ga(r,t)},Xa=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},Ss=(e,t,r,s)=>{const a=Ya(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await a.next();if(u){l(),c.close();return}let f=h.byteLength;if(r){let b=i+=f;r(b)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Cs=64*1024,{isFunction:tt}=x,Za=(({Request:e,Response:t})=>({Request:e,Response:t}))(x.global),{ReadableStream:ks,TextEncoder:Es}=x.global,Os=(e,...t)=>{try{return!!e(...t)}catch{return!1}},ei=e=>{e=x.merge.call({skipUndefined:!0},Za,e);const{fetch:t,Request:r,Response:s}=e,a=t?tt(t):typeof fetch=="function",i=tt(r),o=tt(s);if(!a)return!1;const l=a&&tt(ks),c=a&&(typeof Es=="function"?(m=>g=>m.encode(g))(new Es):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=i&&l&&Os(()=>{let m=!1;const g=new r(se.origin,{body:new ks,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),h=o&&l&&Os(()=>x.isReadableStream(new s("").body)),f={stream:h&&(m=>m.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(g,j)=>{let E=g&&g[m];if(E)return E.call(g);throw new L(`Response type '${m}' is not supported`,L.ERR_NOT_SUPPORT,j)})});const b=async m=>{if(m==null)return 0;if(x.isBlob(m))return m.size;if(x.isSpecCompliantForm(m))return(await new r(se.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(x.isArrayBufferView(m)||x.isArrayBuffer(m))return m.byteLength;if(x.isURLSearchParams(m)&&(m=m+""),x.isString(m))return(await c(m)).byteLength},v=async(m,g)=>{const j=x.toFiniteNumber(m.getContentLength());return j??b(g)};return async m=>{let{url:g,method:j,data:E,signal:R,cancelToken:y,timeout:p,onDownloadProgress:O,onUploadProgress:C,responseType:N,headers:U,withCredentials:W="same-origin",fetchOptions:T}=pn(m),B=t||fetch;N=N?(N+"").toLowerCase():"text";let Q=Ja([R,y&&y.toAbortSignal()],p),P=null;const H=Q&&Q.unsubscribe&&(()=>{Q.unsubscribe()});let F;try{if(C&&u&&j!=="get"&&j!=="head"&&(F=await v(U,E))!==0){let Z=new r(g,{method:"POST",body:E,duplex:"half"}),ae;if(x.isFormData(E)&&(ae=Z.headers.get("content-type"))&&U.setContentType(ae),Z.body){const[je,ge]=js(F,pt(Ns(C)));E=Ss(Z.body,Cs,je,ge)}}x.isString(W)||(W=W?"include":"omit");const D=i&&"credentials"in r.prototype,re={...T,signal:Q,method:j.toUpperCase(),headers:U.normalize().toJSON(),body:E,duplex:"half",credentials:D?W:void 0};P=i&&new r(g,re);let M=await(i?B(P,T):B(g,re));const J=h&&(N==="stream"||N==="response");if(h&&(O||J&&H)){const Z={};["status","statusText","headers"].forEach(ye=>{Z[ye]=M[ye]});const ae=x.toFiniteNumber(M.headers.get("content-length")),[je,ge]=O&&js(ae,pt(Ns(O),!0))||[];M=new s(Ss(M.body,Cs,je,()=>{ge&&ge(),H&&H()}),Z)}N=N||"text";let ce=await f[x.findKey(f,N)||"text"](M,m);return!J&&H&&H(),await new Promise((Z,ae)=>{fn(Z,ae,{data:ce,headers:le.from(M.headers),status:M.status,statusText:M.statusText,config:m,request:P})})}catch(D){throw H&&H(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new L("Network Error",L.ERR_NETWORK,m,P),{cause:D.cause||D}):L.from(D,D&&D.code,m,P)}}},ti=new Map,xn=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:a}=t,i=[s,a,r];let o=i.length,l=o,c,u,h=ti;for(;l--;)c=i[l],u=h.get(c),u===void 0&&h.set(c,u=l?new Map:ei(t)),h=u;return u};xn();const Jt={http:ga,xhr:Va,fetch:{get:xn}};x.forEach(Jt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Rs=e=>`- ${e}`,si=e=>x.isFunction(e)||e===null||e===!1;function ni(e,t){e=x.isArray(e)?e:[e];const{length:r}=e;let s,a;const i={};for(let o=0;o<r;o++){s=e[o];let l;if(a=s,!si(s)&&(a=Jt[(l=String(s)).toLowerCase()],a===void 0))throw new L(`Unknown adapter '${l}'`);if(a&&(x.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(Rs).join(`
`):" "+Rs(o[0]):"as no adapter specified";throw new L("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const bn={getAdapter:ni,adapters:Jt};function Et(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ue(null,e)}function _s(e){return Et(e),e.headers=le.from(e.headers),e.data=kt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bn.getAdapter(e.adapter||Ge.adapter,e)(e).then(function(s){return Et(e),s.data=kt.call(e,e.transformResponse,s),s.headers=le.from(s.headers),s},function(s){return hn(s)||(Et(e),s&&s.response&&(s.response.data=kt.call(e,e.transformResponse,s.response),s.response.headers=le.from(s.response.headers))),Promise.reject(s)})}const gn="1.13.2",jt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{jt[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Ps={};jt.transitional=function(t,r,s){function a(i,o){return"[Axios v"+gn+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new L(a(o," has been removed"+(r?" in "+r:"")),L.ERR_DEPRECATED);return r&&!Ps[o]&&(Ps[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};jt.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function ri(e,t,r){if(typeof e!="object")throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new L("option "+i+" must be "+c,L.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new L("Unknown option "+i,L.ERR_BAD_OPTION)}}const ot={assertOptions:ri,validators:jt},me=ot.validators;let Oe=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ys,response:new ys}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Re(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&ot.assertOptions(s,{silentJSONParsing:me.transitional(me.boolean),forcedJSONParsing:me.transitional(me.boolean),clarifyTimeoutError:me.transitional(me.boolean)},!1),a!=null&&(x.isFunction(a)?r.paramsSerializer={serialize:a}:ot.assertOptions(a,{encode:me.function,serialize:me.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ot.assertOptions(r,{baseUrl:me.spelling("baseURL"),withXsrfToken:me.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&x.merge(i.common,i[r.method]);i&&x.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=le.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let h,f=0,b;if(!c){const m=[_s.bind(this),void 0];for(m.unshift(...l),m.push(...u),b=m.length,h=Promise.resolve(r);f<b;)h=h.then(m[f++],m[f++]);return h}b=l.length;let v=r;for(;f<b;){const m=l[f++],g=l[f++];try{v=m(v)}catch(j){g.call(this,j);break}}try{h=_s.call(this,v)}catch(m){return Promise.reject(m)}for(f=0,b=u.length;f<b;)h=h.then(u[f++],u[f++]);return h}getUri(t){t=Re(this.defaults,t);const r=mn(t.baseURL,t.url,t.allowAbsoluteUrls);return cn(r,t.params,t.paramsSerializer)}};x.forEach(["delete","get","head","options"],function(t){Oe.prototype[t]=function(r,s){return this.request(Re(s||{},{method:t,url:r,data:(s||{}).data}))}});x.forEach(["post","put","patch"],function(t){function r(s){return function(i,o,l){return this.request(Re(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Oe.prototype[t]=r(),Oe.prototype[t+"Form"]=r(!0)});let ai=class yn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(a);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Ue(i,o,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new yn(function(a){t=a}),cancel:t}}};function ii(e){return function(r){return e.apply(null,r)}}function oi(e){return x.isObject(e)&&e.isAxiosError===!0}const qt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(qt).forEach(([e,t])=>{qt[t]=e});function vn(e){const t=new Oe(e),r=Gs(Oe.prototype.request,t);return x.extend(r,Oe.prototype,t,{allOwnKeys:!0}),x.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return vn(Re(e,a))},r}const Y=vn(Ge);Y.Axios=Oe;Y.CanceledError=Ue;Y.CancelToken=ai;Y.isCancel=hn;Y.VERSION=gn;Y.toFormData=vt;Y.AxiosError=L;Y.Cancel=Y.CanceledError;Y.all=function(t){return Promise.all(t)};Y.spread=ii;Y.isAxiosError=oi;Y.mergeConfig=Re;Y.AxiosHeaders=le;Y.formToJSON=e=>dn(x.isHTMLForm(e)?new FormData(e):e);Y.getAdapter=bn.getAdapter;Y.HttpStatusCode=qt;Y.default=Y;const{Axios:fo,AxiosError:mo,CanceledError:po,isCancel:xo,CancelToken:bo,VERSION:go,all:yo,Cancel:vo,isAxiosError:jo,spread:No,toFormData:wo,AxiosHeaders:So,HttpStatusCode:Co,formToJSON:ko,getAdapter:Eo,mergeConfig:Oo}=Y,I=Y.create({baseURL:"",headers:{"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});console.log(" API Configuration [Build: 2025-11-10T20:00 - SIMPLIFIED]:",{baseURL:"(empty = relative to current origin)",currentOrigin:window.location.origin,hostname:window.location.hostname,note:"All API requests will be relative to current page origin"});I.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const Gt={getAccounts:async()=>(await I.get("/api/accounts")).data,getAccountInfo:async()=>(await I.get("/api/account/info")).data,switchAccount:async e=>(await I.post("/api/account/switch",{account_id:e})).data},xe={getPositions:async()=>(await I.get(`/api/positions?_t=${Date.now()}`)).data,closePosition:async(e,t)=>{await I.post(`/api/positions/${e}/close`,{quantity:t})},modifyStopLoss:async(e,t)=>{await I.post(`/api/positions/${e}/modify-stop`,{stop_price:t})},modifyTakeProfit:async(e,t)=>{await I.post(`/api/positions/${e}/modify-tp`,{take_profit:t})},flattenAll:async()=>{await I.post("/api/positions/flatten")},enableTrailingStop:async(e,t)=>(await I.post(`/api/positions/${e}/trailing-stop`,{enabled:!0,trail_amount:t})).data,disableTrailingStop:async e=>(await I.post(`/api/positions/${e}/trailing-stop`,{enabled:!1})).data,enableBreakeven:async e=>(await I.post(`/api/positions/${e}/breakeven`,{enabled:!0})).data,disableBreakeven:async e=>(await I.post(`/api/positions/${e}/breakeven`,{enabled:!1})).data},Ke={getOrders:async()=>(await I.get(`/api/orders?_t=${Date.now()}`)).data,cancelOrder:async e=>{await I.post(`/api/orders/${e}/cancel`)},cancelAll:async e=>{await I.post("/api/orders/cancel-all",e?{account_id:e}:{})},modifyOrder:async(e,t)=>(await I.post(`/api/orders/${e}/modify`,t)).data,placeOrder:async e=>{const t={...e};return t.symbol&&(t.symbol=t.symbol.trim().toUpperCase()),t.order_type&&(t.order_type=t.order_type.toLowerCase()),(await I.post("/api/orders/place",t)).data}},Fe={getStrategies:async()=>(await I.get("/api/strategies")).data,getStrategyStatus:async()=>(await I.get("/api/strategies/status")).data,startStrategy:async(e,t,r)=>{const s={symbols:t??[]};return r&&(s.accountId=r),(await I.post(`/api/strategies/${e}/start`,s)).data},stopStrategy:async(e,t)=>{const r={};return t&&(r.accountId=t),(await I.post(`/api/strategies/${e}/stop`,r)).data},getStrategyStats:async(e,t)=>{const r=t?`?account_id=${t}`:"";return(await I.get(`/api/strategies/${e}/stats${r}`)).data},getStrategyLogs:async(e,t)=>{const r=t?`?limit=${t}`:"";return(await I.get(`/api/strategies/${e}/logs${r}`)).data},testStrategy:async(e,t)=>{const r={};return t&&(r.account_id=t),(await I.post(`/api/strategies/${e}/test`,r)).data}},li={getMetrics:async()=>{const e=await I.get("/api/metrics");return e.data.performance||e.data}},ci={getRisk:async e=>{const t=e?`?account_id=${encodeURIComponent(e)}`:"";return(await I.get(`/api/risk${t}`)).data}},ui={getTrades:async(e={})=>{const t=new URLSearchParams;e.accountId&&t.append("account_id",e.accountId),e.start&&t.append("start",e.start),e.end&&t.append("end",e.end),e.symbol&&t.append("symbol",e.symbol),e.type&&t.append("type",e.type),e.limit&&t.append("limit",String(e.limit)),e.cursor&&t.append("cursor",e.cursor),t.append("refresh","1"),t.append("_t",Date.now().toString());const r=t.toString();return(await I.get(`/api/trades${r?`?${r}`:""}`)).data}},jn={getPerformanceSummary:async()=>(await I.get("/api/performance")).data,getPerformanceHistory:async(e={})=>{const t=new URLSearchParams;e.accountId&&t.append("account_id",e.accountId),e.interval&&t.append("interval",e.interval),e.start&&t.append("start",e.start),e.end&&t.append("end",e.end);const r=t.toString();return(await I.get(`/api/performance/history${r?`?${r}`:""}`)).data},getHistoricalData:async e=>{const t=new URLSearchParams;return t.append("symbol",e.symbol),e.timeframe&&t.append("timeframe",e.timeframe),e.limit&&t.append("limit",String(e.limit)),e.end&&t.append("end",e.end),(await I.get(`/api/history?${t.toString()}`)).data}},Qt={getSettings:async(e="global")=>{const t=e&&e!=="global"?`?account_id=${e}`:"";return(await I.get(`/api/settings${t}`)).data},saveSettings:async e=>{const t={...e};return(await I.post("/api/settings",t)).data}},di={getNotifications:async e=>{const t=e?`?account_id=${e}`:"";return(await I.get(`/api/notifications${t}`)).data}},hi={testOvernightBreakout:async(e,t,r)=>(await I.post("/api/test/overnight-breakout",{symbol:e||"MNQ",quantity:t||1,account_name:r||"PRAC"})).data},Nn=w.createContext(void 0);function fi({children:e}){const[t,r]=w.useState(null),{data:s=[],isLoading:a}=ne("accounts",Gt.getAccounts,{refetchInterval:6e4,staleTime:3e4}),{data:i}=ne(["settings","global"],()=>Qt.getSettings("global"),{staleTime:6e4,refetchOnWindowFocus:!1});return w.useEffect(()=>{var o;if(s.length>0&&!t){const l=(o=i==null?void 0:i.settings)==null?void 0:o.defaultAccount,c=l?s.find(u=>String(u.id)===String(l)||String(u.account_id)===String(l)||String(u.accountId)===String(l)):null;r(c||s[0])}},[s,t,i]),n.jsx(Nn.Provider,{value:{accounts:s,selectedAccount:t,setSelectedAccount:r,isLoading:a},children:e})}function be(){const e=w.useContext(Nn);if(e===void 0)throw new Error("useAccount must be used within an AccountProvider");return e}const mi=()=>{const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"ws://localhost:8080/ws":`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`},wn=mi();console.log(" WebSocket Configuration [Build: 2025-11-10T19:45 - FIXED]:",{url:wn,hostname:window.location.hostname,protocol:window.location.protocol,isLocalhost:window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"});class pi{constructor(){ve(this,"socket",null);ve(this,"listeners",new Map);ve(this,"reconnectAttempts",0);ve(this,"maxReconnectAttempts",8);ve(this,"reconnectDelay",1e3);ve(this,"heartbeatIntervalId",null);ve(this,"HEARTBEAT_INTERVAL",3e4);ve(this,"manualClose",!1)}connect(){if(!(this.socket&&(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING))){this.notify("socket_connecting",{timestamp:new Date().toISOString()});try{this.manualClose=!1,this.socket=new WebSocket(wn),this.socket.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.notify("socket_connected",{timestamp:new Date().toISOString()}),this.startHeartbeat()},this.socket.onclose=t=>{console.log("WebSocket disconnected",t.reason||""),this.clearHeartbeat(),this.notify("socket_disconnected",{code:t.code,reason:t.reason,wasClean:t.wasClean,timestamp:new Date().toISOString()}),this.manualClose||this.attemptReconnect()},this.socket.onmessage=t=>{try{const r=JSON.parse(t.data);this.handleMessage(r)}catch(r){console.error("Error parsing WebSocket message:",r)}},this.socket.onerror=t=>{console.error("WebSocket error:",t),this.notify("socket_error",{error:t})}}catch(t){console.error("Failed to create WebSocket:",t),this.notify("socket_error",{error:t}),this.attemptReconnect()}}}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.notify("socket_failed",{attempts:this.reconnectAttempts,timestamp:new Date().toISOString()});return}this.reconnectAttempts++;const t=this.reconnectDelay*this.reconnectAttempts;console.log(`Reconnecting in ${t}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),this.notify("socket_reconnecting",{attempt:this.reconnectAttempts,delay:t,timestamp:new Date().toISOString()}),window.setTimeout(()=>{this.connect()},t)}disconnect(){this.manualClose=!0,this.clearHeartbeat(),this.socket&&(this.socket.close(),this.socket=null)}forceReconnect(){this.manualClose=!1,this.reconnectAttempts=0,this.clearHeartbeat(),this.socket&&(this.socket.close(),this.socket=null),this.connect()}on(t,r){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(r)}off(t,r){var s;(s=this.listeners.get(t))==null||s.delete(r)}emit(t,r){var s;((s=this.socket)==null?void 0:s.readyState)===WebSocket.OPEN&&this.socket.send(JSON.stringify({action:t,payload:r}))}handleMessage(t){const r=this.listeners.get(t.type);r&&r.forEach(s=>s(t.data))}notify(t,r){const s=this.listeners.get(t);s&&s.forEach(a=>a(r))}startHeartbeat(){this.clearHeartbeat(),this.heartbeatIntervalId=window.setInterval(()=>{var t;((t=this.socket)==null?void 0:t.readyState)===WebSocket.OPEN&&this.socket.send(JSON.stringify({action:"ping",payload:{timestamp:Date.now()}}))},this.HEARTBEAT_INTERVAL)}clearHeartbeat(){this.heartbeatIntervalId!==null&&(window.clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=null)}isConnected(){var t;return((t=this.socket)==null?void 0:t.readyState)===WebSocket.OPEN||!1}}const q=new pi,Sn=w.createContext(void 0);function xi({children:e}){const[t,r]=w.useState("connecting"),[s,a]=w.useState(0),[i,o]=w.useState(null),[l,c]=w.useState(null),[u,h]=w.useState(null);w.useEffect(()=>{const v=()=>{r("connecting"),h(null)},m=y=>{r("connected"),a(0),o((y==null?void 0:y.timestamp)??new Date().toISOString()),h(null)},g=y=>{r("disconnected"),c((y==null?void 0:y.timestamp)??new Date().toISOString())},j=y=>{r("reconnecting"),y!=null&&y.attempt?a(y.attempt):a(p=>p+1)},E=y=>{var O;r("error");const p=(y==null?void 0:y.error)instanceof Event?y.error.type:((O=y==null?void 0:y.error)==null?void 0:O.message)??"Unknown error";h(p)},R=y=>{r("error"),y!=null&&y.attempts&&a(y.attempts)};return q.on("socket_connecting",v),q.on("socket_connected",m),q.on("socket_disconnected",g),q.on("socket_reconnecting",j),q.on("socket_error",E),q.on("socket_failed",R),q.connect(),()=>{q.off("socket_connecting",v),q.off("socket_connected",m),q.off("socket_disconnected",g),q.off("socket_reconnecting",j),q.off("socket_error",E),q.off("socket_failed",R)}},[]);const f=w.useCallback(()=>{r("connecting"),h(null),a(0),q.forceReconnect()},[]),b=w.useMemo(()=>({status:t,reconnectAttempts:s,lastConnectedAt:i,lastDisconnectedAt:l,lastError:u,reconnect:f,isConnected:q.isConnected()}),[t,s,i,l,u,f]);return n.jsx(Sn.Provider,{value:b,children:e})}function bi(){const e=w.useContext(Sn);if(!e)throw new Error("useWebSocket must be used within a WebSocketProvider");return e}const Cn=()=>{const e=de();w.useEffect(()=>{const t=()=>{e.invalidateQueries("positions"),e.invalidateQueries("orders")},r=()=>{e.invalidateQueries("positions")},s=()=>{e.invalidateQueries("orders")};return q.on("marketUpdate",t),q.on("position_update",r),q.on("order_update",s),()=>{q.off("marketUpdate",t),q.off("position_update",r),q.off("order_update",s)}},[e])};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(e,t)=>{const r=w.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>w.createElement("svg",{ref:h,...gi,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${yi(e)}`,l].join(" "),...u},[...t.map(([f,b])=>w.createElement(f,b)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=K("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=K("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=K("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=K("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=K("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=K("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=K("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=K("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=K("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=K("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=K("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=K("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function _i({account:e,isSelected:t,onSelect:r}){const s=e.dailyPnL??e.daily_pnl??0,a=s>=0?"text-green-400":"text-red-400",i=s>=0?wt:Zt;return n.jsxs("div",{className:`p-6 rounded-lg border-2 transition-all cursor-pointer ${t?"bg-slate-800 border-primary-500 shadow-lg shadow-primary-500/20":"bg-slate-800/50 border-slate-700 hover:border-slate-600"}`,onClick:r,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:e.name}),n.jsx("p",{className:"text-sm text-slate-400",children:e.account_type})]}),n.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${e.status==="active"?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-400"}`,children:e.status})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ni,{className:"w-5 h-5 text-slate-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-slate-400",children:"Balance"}),n.jsxs("p",{className:"text-2xl font-bold",children:[e.currency," ",e.balance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),s!==0&&n.jsxs("div",{className:`flex items-center gap-2 ${a}`,children:[n.jsx(i,{className:"w-4 h-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm",children:"P&L"}),n.jsxs("p",{className:"text-lg font-semibold",children:[s>=0?"+":"",e.currency," ",Math.abs(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]})]})}function es({accounts:e,selectedAccount:t,onAccountChange:r}){var h;const[s,a]=w.useState(!1),i=de(),o=f=>f.id||f.accountId||f.account_id||f.name||"unknown",l=f=>f.name||f.accountId||f.account_id||o(f),c=ee(f=>Gt.switchAccount(f),{onSuccess:f=>{if(f.success&&f.account){const b={id:f.account.id||f.account.accountId||f.account.account_id||o(f.account),name:f.account.name||f.account.accountId||o(f.account),status:f.account.status||"active",balance:Number(f.account.balance??0),currency:f.account.currency||"USD",account_type:f.account.account_type||"unknown",accountId:f.account.accountId,account_id:f.account.account_id,equity:f.account.equity??f.account.balance??0,dailyPnL:f.account.dailyPnL??f.account.daily_pnl??0,daily_pnl:f.account.dailyPnL??f.account.daily_pnl??0};r(b),i.setQueryData("accountInfo",b),i.setQueryData("accounts",m=>(m==null?void 0:m.map(g=>o(g)===b.id?{...g,balance:b.balance,status:b.status}:g))||[]),["accounts","accountInfo","positions","orders","metrics","trades","performance","performanceHistory","historicalData"].forEach(m=>i.invalidateQueries({predicate:g=>g.queryKey[0]===m})),a(!1)}},onError:f=>{console.error("Failed to switch account:",f)}}),u=async f=>{const b=t?o(t):null,v=o(f);if(v===b){a(!1);return}c.mutate(v)};return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>a(!s),className:"w-full bg-slate-700 hover:bg-slate-600 rounded-lg px-4 py-3 flex items-center justify-between transition-colors border border-slate-600",disabled:c.isLoading,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),n.jsx("div",{className:"text-left",children:t?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium",children:l(t)}),n.jsxs("div",{className:"text-xs text-slate-400",children:["$",((h=t.balance)==null?void 0:h.toLocaleString())||"N/A"]})]}):n.jsx("div",{className:"text-slate-400",children:"Select Account"})})]}),n.jsx(Ye,{className:`w-5 h-5 transition-transform ${s?"rotate-180":""}`})]}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),n.jsx("div",{className:"absolute top-full mt-2 w-full bg-slate-700 border border-slate-600 rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto",children:e.length===0?n.jsx("div",{className:"px-4 py-3 text-slate-400 text-sm",children:"No accounts available"}):e.map(f=>{var j;const b=o(f),v=t?o(t):null,m=b===v,g=c.isLoading&&c.variables===b;return n.jsxs("button",{onClick:()=>u(f),disabled:c.isLoading,className:`w-full px-4 py-3 flex items-center justify-between hover:bg-slate-600 transition-colors ${m?"bg-slate-600":""} ${c.isLoading?"opacity-50":""}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${f.status==="active"?"bg-green-500":"bg-slate-500"}`}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium",children:l(f)}),n.jsxs("div",{className:"text-xs text-slate-400",children:["$",((j=f.balance)==null?void 0:j.toLocaleString())||"N/A",f.status&&n.jsxs("span",{className:"ml-2 capitalize",children:[" ",f.status]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[g&&n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-500"}),m&&!g&&n.jsx(Fs,{className:"w-5 h-5 text-primary-400"})]})]},b)})})]}),c.isError&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-400 text-sm",children:[n.jsx(De,{className:"w-4 h-4"}),n.jsx("span",{children:"Failed to switch account"})]}),c.isSuccess&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-green-400 text-sm",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsx("span",{children:"Account switched successfully"})]})]})}function Pi({metrics:e}){return n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Performance Metrics"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-sm font-medium text-slate-400 flex items-center gap-2",children:[n.jsx(Yt,{className:"w-4 h-4"}),"System"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Memory"}),n.jsxs("p",{className:"font-semibold",children:[e.system.memory_mb," MB"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"CPU"}),n.jsxs("p",{className:"font-semibold",children:[e.system.cpu_percent,"%"]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("p",{className:"text-slate-400",children:"Uptime"}),n.jsx("p",{className:"font-semibold",children:e.system.uptime})]})]})]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t border-slate-700",children:[n.jsxs("h3",{className:"text-sm font-medium text-slate-400 flex items-center gap-2",children:[n.jsx(Bt,{className:"w-4 h-4"}),"API Calls"]}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-400",children:"Total"}),n.jsx("span",{className:"font-semibold",children:e.api.total_calls})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-400",children:"Errors"}),n.jsx("span",{className:`font-semibold ${e.api.total_errors>0?"text-red-400":"text-green-400"}`,children:e.api.total_errors})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-400",children:"Error Rate"}),n.jsxs("span",{className:`font-semibold ${e.api.error_rate>1?"text-red-400":"text-green-400"}`,children:[e.api.error_rate.toFixed(2),"%"]})]})]})]}),Object.keys(e.cache).length>0&&n.jsxs("div",{className:"space-y-2 pt-4 border-t border-slate-700",children:[n.jsxs("h3",{className:"text-sm font-medium text-slate-400 flex items-center gap-2",children:[n.jsx(ji,{className:"w-4 h-4"}),"Cache"]}),n.jsx("div",{className:"space-y-2",children:Object.entries(e.cache).map(([t,r])=>n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("span",{className:"text-slate-400 text-xs",children:t}),n.jsx("span",{className:"font-semibold",children:r.hit_rate})]}),n.jsx("div",{className:"w-full bg-slate-700 rounded-full h-1.5",children:n.jsx("div",{className:"bg-primary-500 h-1.5 rounded-full transition-all",style:{width:r.hit_rate}})})]},t))})]})]})]})}function Fi(){const{selectedAccount:e}=be(),t=e==null?void 0:e.id,{data:r=[],isLoading:s}=ne(["positions",t],xe.getPositions,{enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1});return s?n.jsx("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:n.jsx("p",{className:"text-slate-400",children:"Loading positions..."})}):r.length===0?n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Open Positions"}),n.jsx("p",{className:"text-slate-400",children:"No open positions"})]}):n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Open Positions"}),n.jsx("div",{className:"space-y-3",children:r.map(a=>{const i=a.side==="LONG",o=Number(a.unrealized_pnl??0),l=Number(a.realized_pnl??0),c=Number(a.entry_price??0),u=Number(a.current_price??c),h=o>=0?wt:Zt,f=o>=0?"text-green-400":"text-red-400";return n.jsxs("div",{className:"p-4 bg-slate-700/50 rounded-lg border border-slate-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${i?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:a.side}),n.jsx("span",{className:"font-semibold",children:a.symbol}),n.jsxs("span",{className:"text-slate-400 text-sm",children:["x",Number(a.quantity??0)]})]}),n.jsxs("div",{className:`flex items-center gap-1 ${f}`,children:[n.jsx(h,{className:"w-4 h-4"}),n.jsxs("span",{className:"font-semibold",children:["$",o.toFixed(2)]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Entry"}),n.jsxs("p",{className:"font-semibold",children:["$",c.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Current"}),n.jsxs("p",{className:"font-semibold",children:["$",u.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Realized P&L"}),n.jsxs("p",{className:`font-semibold ${l>=0?"text-green-400":"text-red-400"}`,children:["$",l.toFixed(2)]})]})]})]},a.id||`${a.symbol}-${a.entry_price}`)})})]})}const Ti=[{label:"Trade",value:"trade"},{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"}];function Ai(){const{selectedAccount:e}=be(),[t,r]=w.useState("day"),{data:s,isLoading:a}=ne(["performanceHistory",e==null?void 0:e.id,t],async()=>{console.log(" PerformanceChart: Fetching performance history for account:",e==null?void 0:e.id,"interval:",t);try{const c=await jn.getPerformanceHistory({accountId:e==null?void 0:e.id,interval:t});return console.log(" PerformanceChart: Received data:",c),c.points&&c.points.length>0&&(console.log(` PerformanceChart [${t}]: First 5 data points:`),c.points.slice(0,5).forEach((u,h)=>{console.log(`  Point ${h+1}:`,{timestamp:u.timestamp,period_pnl:u.period_pnl,cumulative_pnl:u.cumulative_pnl,trade_count:u.trade_count})}),console.log(` PerformanceChart [${t}]: Last 5 data points:`),c.points.slice(-5).forEach((u,h)=>{console.log(`  Point ${c.points.length-4+h}:`,{timestamp:u.timestamp,period_pnl:u.period_pnl,cumulative_pnl:u.cumulative_pnl,trade_count:u.trade_count})})),c}catch(c){throw console.error(" PerformanceChart: Error fetching data:",c),c}},{enabled:!!e,staleTime:6e4,onError:c=>{console.error(" PerformanceChart: Query error:",c)}}),i=w.useMemo(()=>{var m;if(!(s!=null&&s.summary))return null;const c=(m=s.points)==null?void 0:m[s.points.length-1],u=(c==null?void 0:c.cumulative_pnl)??s.summary.total_pnl??0,h=(e==null?void 0:e.balance)??(e==null?void 0:e.equity),b=(h!=null&&!Number.isNaN(Number(h))?Number(h):void 0)??s.summary.end_balance??(s.summary.start_balance??0)+u,v=s.summary.start_balance??b-u;return{...s.summary,start_balance:v,end_balance:b}},[s,e]),o=w.useMemo(()=>{if(!(s!=null&&s.points))return[];const c=(i==null?void 0:i.start_balance)??0,u=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",hour:t==="trade"||t==="hour"?"2-digit":void 0,minute:t==="trade"||t==="hour"?"2-digit":void 0});return s.points.map(h=>({label:u.format(new Date(h.timestamp)),cumulative:h.cumulative_pnl,period:h.period_pnl,balance:c+h.cumulative_pnl,trades:h.trade_count}))},[s,t,i]),l=()=>{const c=e==null?void 0:e.id,u=new URLSearchParams;c&&u.append("account_id",c),u.append("interval",t);const h=`/api/performance/export${u.toString()?`?${u.toString()}`:""}`;window.open(h,"_blank")};return n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Performance"}),n.jsxs("button",{onClick:l,className:"px-3 py-2 bg-blue-500/20 text-blue-300 rounded hover:bg-blue-500/30 transition-colors flex items-center gap-2 text-sm",disabled:!e||!s,children:[n.jsx(On,{className:"w-4 h-4"}),"Export CSV"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Ti.map(c=>n.jsx("button",{onClick:()=>r(c.value),className:`px-3 py-1 rounded-full text-xs font-semibold transition-colors ${t===c.value?"bg-primary-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:c.label},c.value))})]}),a?n.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400 text-sm",children:"Loading performance history..."}):o.length===0?n.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500 text-sm",children:"No historical trades available for this period."}):n.jsx(_t,{width:"100%",height:320,children:n.jsxs(Ms,{data:o,children:[n.jsx(Pt,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(Ft,{dataKey:"label",stroke:"#9CA3AF",minTickGap:16}),n.jsx(lt,{stroke:"#9CA3AF",yAxisId:"left"}),n.jsx(lt,{stroke:"#9CA3AF",yAxisId:"right",orientation:"right"}),n.jsx(Tt,{contentStyle:{backgroundColor:"#1E293B",border:"1px solid #334155",borderRadius:"8px"}}),n.jsx(Vn,{}),n.jsx(Te,{type:"monotone",dataKey:"cumulative",stroke:"#10B981",strokeWidth:2,yAxisId:"left",name:"Cumulative P&L",dot:!1}),n.jsx(Te,{type:"monotone",dataKey:"balance",stroke:"#3B82F6",strokeWidth:2,yAxisId:"right",name:"Balance",dot:!1}),n.jsx(Te,{type:"monotone",dataKey:"period",stroke:"#F59E0B",strokeWidth:1,strokeDasharray:"4 4",yAxisId:"left",name:"Period P&L",dot:!1})]})}),i&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm bg-slate-900/60 rounded-lg p-4 border border-slate-700/60",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Total P&L"}),n.jsxs("p",{className:`font-semibold ${i.total_pnl>=0?"text-green-400":"text-red-400"}`,children:[i.total_pnl>=0?"+":"","$",Math.abs(i.total_pnl).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Win Rate"}),n.jsxs("p",{className:"font-semibold",children:[i.win_rate.toFixed(2),"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Max Drawdown"}),n.jsxs("p",{className:"font-semibold",children:["-$",Math.abs(i.max_drawdown).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Trades"}),n.jsx("p",{className:"font-semibold",children:i.trade_count})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Current Balance"}),n.jsxs("p",{className:"font-semibold",children:["$",Number(i.end_balance??0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})}const Li=["1m","5m","15m","1h","4h","1d"],Di=[{value:"line",label:"Line"},{value:"candlestick",label:"Candlestick"}],Mi=[{value:100,label:"100"},{value:300,label:"300"},{value:500,label:"500"},{value:1e3,label:"1000"}],$i=(e,t)=>{const r=new Date(e),s=t==="1d"?{month:"short",day:"numeric"}:{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Intl.DateTimeFormat(void 0,s).format(r)},Ii=e=>{const{x:t,y:r,width:s,payload:a}=e;if(!a)return null;const{open:i,close:o,high:l,low:c,_yDomainMin:u,_yDomainMax:h,_yDomainRange:f}=a;if(i===void 0||o===void 0||l===void 0||c===void 0||!u||!h||!f)return null;const b=o>=i,v=b?"#26A69A":"#EF5350",m=b?"#26A69A":"#EF5350",g=b?"#1DE9B6":"#FF5252",E=400/f,R=r,y=R+(l-c)*E,p=R+(l-i)*E,O=R+(l-o)*E,C=Math.min(p,O),N=Math.max(p,O),U=Math.abs(O-p),T=Math.max(U,i===o?2:1),B=Math.max(s-2,2),Q=t+(s-B)/2;return n.jsxs("g",{children:[n.jsx("line",{x1:t+s/2,y1:R,x2:t+s/2,y2:C,stroke:m,strokeWidth:1.5}),n.jsx("rect",{x:Q,y:C,width:B,height:T,fill:v,stroke:g,strokeWidth:1,fillOpacity:.8}),n.jsx("line",{x1:t+s/2,y1:N,x2:t+s/2,y2:y,stroke:m,strokeWidth:1.5})]})};function Ui(){const[e,t]=w.useState("MNQ"),[r,s]=w.useState("5m"),[a,i]=w.useState("line"),[o,l]=w.useState(300),[c,u]=w.useState(""),[h,f]=w.useState(""),[b,v]=w.useState(!1),[m,g]=w.useState(null),[j,E]=w.useState(null),R=w.useRef(null),y=w.useMemo(()=>h?new Date(h).toISOString():new Date().toISOString(),[h]),{data:p,isLoading:O}=ne(["historicalData",e,r,o,y],()=>jn.getHistoricalData({symbol:e,timeframe:r,limit:o,end:y}),{enabled:!!e,staleTime:6e4,refetchInterval:a==="candlestick"?3e4:!1}),C=w.useMemo(()=>{if(!(p!=null&&p.bars))return[];const N=p.bars.map(P=>({label:$i(P.timestamp,r),timestamp:P.timestamp,open:P.open,close:P.close,high:P.high,low:P.low,range:[P.low,P.high]})),U=N.flatMap(P=>[P.high,P.low,P.open,P.close]),W=Math.min(...U),T=Math.max(...U),B=W-5,Q=T+5;return N.map(P=>({...P,_yDomainMin:B,_yDomainMax:Q,_yDomainRange:Q-B}))},[p,r]);return n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 space-y-4",children:[n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Price Chart"}),n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("input",{value:e,onChange:N=>t(N.target.value.toUpperCase()),className:"bg-slate-900 border border-slate-700 rounded px-3 py-1 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Symbol",maxLength:10}),n.jsx("div",{className:"flex gap-1",children:Li.map(N=>n.jsx("button",{onClick:()=>s(N),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${r===N?"bg-primary-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:N.toUpperCase()},N))})]})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm flex-wrap",children:[n.jsx("span",{className:"text-slate-400",children:"Chart Type:"}),n.jsx("div",{className:"flex gap-1",children:Di.map(N=>n.jsx("button",{onClick:()=>i(N.value),className:`px-3 py-1 text-xs font-semibold rounded transition-colors ${a===N.value?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:N.label},N.value))}),n.jsx("span",{className:"text-slate-400 ml-4",children:"Bars:"}),n.jsx("div",{className:"flex gap-1",children:Mi.map(N=>n.jsx("button",{onClick:()=>l(N.value),className:`px-3 py-1 text-xs font-semibold rounded transition-colors ${o===N.value?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:N.label},N.value))})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm flex-wrap",children:[n.jsx("span",{className:"text-slate-400",children:"Date Range:"}),n.jsx("input",{type:"datetime-local",value:c,onChange:N=>u(N.target.value),className:"bg-slate-900 border border-slate-700 rounded px-3 py-1 text-xs text-slate-200 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Start Date"}),n.jsx("span",{className:"text-slate-500",children:"to"}),n.jsx("input",{type:"datetime-local",value:h,onChange:N=>f(N.target.value),className:"bg-slate-900 border border-slate-700 rounded px-3 py-1 text-xs text-slate-200 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"End Date (default: now)"}),(c||h)&&n.jsx("button",{onClick:()=>{u(""),f("")},className:"px-3 py-1 text-xs font-semibold rounded bg-slate-700 text-slate-300 hover:bg-slate-600",children:"Clear"})]})]}),O?n.jsx("div",{className:"h-96 flex items-center justify-center text-slate-400 text-sm",children:"Loading historical prices..."}):C.length===0?n.jsxs("div",{className:"h-96 flex items-center justify-center text-slate-500 text-sm",children:["No data available for ",e,"."]}):a==="line"?n.jsx(_t,{width:"100%",height:400,children:n.jsxs(Ms,{data:C,children:[n.jsx(Pt,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(Ft,{dataKey:"label",stroke:"#9CA3AF",minTickGap:16}),n.jsx(lt,{stroke:"#9CA3AF",domain:["dataMin - 5","dataMax + 5"],orientation:"right",width:80}),n.jsx(Tt,{contentStyle:{backgroundColor:"#1E293B",border:"1px solid #334155",borderRadius:"8px"}}),n.jsx(is,{dataKey:"label",height:30,stroke:"#3B82F6",fill:"#1E293B"}),n.jsx(Te,{type:"monotone",dataKey:"close",stroke:"#3B82F6",strokeWidth:2,dot:!1,name:"Close"}),n.jsx(Te,{type:"monotone",dataKey:"high",stroke:"#10B981",strokeWidth:1,dot:!1,name:"High",opacity:.4}),n.jsx(Te,{type:"monotone",dataKey:"low",stroke:"#F59E0B",strokeWidth:1,dot:!1,name:"Low",opacity:.4})]})}):n.jsxs("div",{ref:R,className:"relative",onMouseEnter:()=>v(!0),onMouseLeave:()=>{v(!1),g(null),E(null)},style:{cursor:b?"crosshair":"default"},children:[n.jsx(_t,{width:"100%",height:400,children:n.jsxs(Jn,{data:C,onMouseMove:N=>{if(N&&N.activePayload&&N.activePayload[0]){const U=N.activePayload[0].payload;g(U.close),E(U.label)}},children:[n.jsx(Pt,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(Ft,{dataKey:"label",stroke:"#9CA3AF",minTickGap:16}),n.jsx(lt,{stroke:"#9CA3AF",domain:["dataMin - 5","dataMax + 5"],orientation:"right",width:80}),n.jsx(Tt,{contentStyle:{backgroundColor:"#1E293B",border:"1px solid #334155",borderRadius:"8px"},content:({active:N,payload:U})=>{var W,T,B,Q;if(N&&U&&U.length){const P=U[0].payload,H=P.close>=P.open;return n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded p-3 text-xs",children:[n.jsx("p",{className:"text-slate-400 mb-1",children:P.label}),n.jsxs("p",{className:"text-green-400",children:["O: $",(W=P.open)==null?void 0:W.toFixed(2)]}),n.jsxs("p",{className:"text-blue-400",children:["H: $",(T=P.high)==null?void 0:T.toFixed(2)]}),n.jsxs("p",{className:"text-orange-400",children:["L: $",(B=P.low)==null?void 0:B.toFixed(2)]}),n.jsxs("p",{className:H?"text-green-400 font-semibold":"text-red-400 font-semibold",children:["C: $",(Q=P.close)==null?void 0:Q.toFixed(2)]}),n.jsxs("p",{className:H?"text-green-400":"text-red-400",children:[H?"":""," $",Math.abs(P.close-P.open).toFixed(2)," (",((P.close-P.open)/P.open*100).toFixed(2),"%)"]})]})}return null}}),b&&m!==null&&n.jsx(n.Fragment,{children:n.jsx(Gn,{y:m,stroke:"#3B82F6",strokeDasharray:"2 2",strokeOpacity:.5})}),n.jsx(is,{dataKey:"label",height:30,stroke:"#3B82F6",fill:"#1E293B",startIndex:Math.max(0,C.length-100)}),n.jsx(Yn,{dataKey:"high",fill:"#8884d8",shape:n.jsx(Ii,{})})]})}),b&&m!==null&&j&&n.jsxs("div",{className:"absolute top-2 right-2 bg-slate-900 border border-slate-700 rounded px-3 py-2 text-xs pointer-events-none z-10",children:[n.jsx("p",{className:"text-slate-400",children:j}),n.jsxs("p",{className:"text-blue-400 font-semibold",children:["$",m.toFixed(2)]})]})]})]})}const Ot=new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),qi=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"});function Qi(){const{selectedAccount:e}=be(),[t,r]=w.useState(20),{data:s,isLoading:a}=ne(["trades",e==null?void 0:e.id,t],()=>ui.getTrades({accountId:e==null?void 0:e.id,limit:t,type:"filled"}),{enabled:!!e,staleTime:3e4}),i=(s==null?void 0:s.items)??[],o=w.useMemo(()=>s!=null&&s.summary?s.summary:null,[s]),l=()=>{const c=e==null?void 0:e.id,u=new URLSearchParams;c&&u.append("account_id",c);const h=`/api/trades/export${u.toString()?`?${u.toString()}`:""}`;window.open(h,"_blank")};return n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Recent Trades"}),n.jsxs("button",{onClick:l,className:"px-3 py-2 bg-blue-500/20 text-blue-300 rounded hover:bg-blue-500/30 transition-colors flex items-center gap-2 text-sm",disabled:!e||i.length===0,children:[n.jsx(On,{className:"w-4 h-4"}),"Export CSV"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"text-xs text-slate-400 flex items-center gap-2",children:["Rows",n.jsx("select",{value:t,onChange:c=>r(Number(c.target.value)),className:"bg-slate-900 border border-slate-700 text-slate-200 text-xs px-2 py-1 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",children:[20,50,100].map(c=>n.jsx("option",{value:c,children:c},c))})]}),o&&n.jsxs("div",{className:"flex flex-col items-end text-xs text-slate-400",children:[n.jsxs("div",{children:["Gross PnL (shown trades):"," ",n.jsxs("span",{className:o.gross_pnl>=0?"text-green-400 font-semibold":"text-red-400 font-semibold",children:[o.gross_pnl>=0?"+":"",Ot.format(Math.abs(o.gross_pnl))]})]}),o.total_in_period&&o.displayed_count&&o.total_in_period>o.displayed_count&&n.jsxs("div",{className:"text-slate-500 mt-1",children:["Showing ",o.displayed_count," of ",o.total_in_period," total trades"]})]})]})]}),a?n.jsx("div",{className:"py-10 text-center text-slate-400 text-sm",children:"Loading trades..."}):i.length===0?n.jsx("div",{className:"py-10 text-center text-slate-500 text-sm",children:"No trades in this period."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"max-h-[32rem] overflow-y-auto pr-1",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-800",children:n.jsxs("tr",{className:"text-slate-400 text-xs uppercase tracking-wide",children:[n.jsx("th",{className:"pb-3 text-left",children:"Time"}),n.jsx("th",{className:"pb-3 text-left",children:"Symbol"}),n.jsx("th",{className:"pb-3 text-left",children:"Side"}),n.jsx("th",{className:"pb-3 text-right",children:"Qty"}),n.jsx("th",{className:"pb-3 text-right",children:"Price"}),n.jsx("th",{className:"pb-3 text-right",children:"Net P&L"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-700/60",children:i.map(c=>{const u=c.net_pnl>=0?"text-green-400":"text-red-400";return n.jsxs("tr",{className:"hover:bg-slate-700/40 transition-colors",children:[n.jsx("td",{className:"py-2 text-slate-300",children:qi.format(new Date(c.timestamp))}),n.jsx("td",{className:"py-2 font-semibold text-slate-100",children:c.symbol}),n.jsx("td",{className:`py-2 uppercase ${c.side==="BUY"?"text-green-300":"text-red-300"}`,children:c.side}),n.jsx("td",{className:"py-2 text-right text-slate-200",children:c.quantity}),n.jsx("td",{className:"py-2 text-right text-slate-200",children:c.price?Ot.format(c.price):""}),n.jsxs("td",{className:`py-2 text-right font-semibold ${u}`,children:[c.net_pnl>=0?"+":"",Ot.format(Math.abs(c.net_pnl))]})]},c.id)})})]})})})]})}const Bi=new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",minimumFractionDigits:2}),As=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}),pe=e=>e==null||Number.isNaN(e)?"":Bi.format(e),Ls=e=>{if(!e)return"";try{return new Date(e).toLocaleString()}catch{return e}},Ds=(e,t)=>e||t>=1?"bg-red-500":t>=.8?"bg-amber-500":"bg-emerald-500",Hi=e=>e?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":"bg-red-500/20 text-red-200 border border-red-500/30",Ki={info:"bg-slate-700 text-slate-200 border border-slate-600",warning:"bg-amber-500/20 text-amber-300 border border-amber-500/40",error:"bg-red-500/20 text-red-200 border border-red-500/40",success:"bg-emerald-500/20 text-emerald-200 border border-emerald-500/40"};function Wi(){const{selectedAccount:e}=be(),t=e==null?void 0:e.id,r=de(),[s,a]=w.useState(!0),{data:i,isLoading:o,error:l,refetch:c,isFetching:u}=ne(["risk",t],()=>ci.getRisk(t),{enabled:!!t,staleTime:3e4,refetchInterval:6e4,keepPreviousData:!0}),h=!!l,f=l instanceof Error?l.message:"Failed to load risk metrics.";w.useEffect(()=>{const g=j=>{j&&(t&&j.account_id&&String(j.account_id)!==String(t)||r.setQueryData(["risk",t],j))};return q.on("risk_update",g),()=>{q.off("risk_update",g)}},[t,r]);const b=w.useMemo(()=>{if(!i)return null;const g=i.dll.pct??(i.dll.limit?i.dll.used/i.dll.limit:0);return{pct:Math.min(1,Math.max(0,g||0)),limit:i.dll.limit,used:i.dll.used,remaining:i.dll.remaining,violated:i.dll.violated}},[i]),v=w.useMemo(()=>{if(!i)return null;const g=i.mll.pct??(i.mll.limit?i.mll.used/i.mll.limit:0);return{pct:Math.min(1,Math.max(0,g||0)),limit:i.mll.limit,used:i.mll.used,remaining:i.mll.remaining,violated:i.mll.violated}},[i]),m=(i==null?void 0:i.events)??[];return n.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-sm",children:[n.jsxs("button",{type:"button",onClick:()=>a(g=>!g),className:"w-full flex items-center justify-between px-4 py-3",children:[n.jsxs("div",{className:"flex items-center gap-3 text-left",children:[i!=null&&i.compliance?n.jsx(Ei,{className:"w-5 h-5 text-emerald-400"}):n.jsx(ki,{className:"w-5 h-5 text-red-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-slate-200",children:"Risk Monitor"}),n.jsxs("p",{className:"text-xs text-slate-400",children:[i!=null&&i.account_name?`${i.account_name}  `:"",i?Ls(i.timestamp):"Awaiting data"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[u&&n.jsx(Ae,{className:"w-4 h-4 animate-spin text-slate-400"}),s?n.jsx(Nt,{className:"w-4 h-4 text-slate-400"}):n.jsx(Ye,{className:"w-4 h-4 text-slate-400"})]})]}),s&&n.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[o&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[n.jsx(Ae,{className:"w-4 h-4 animate-spin"}),"Loading risk metrics..."]}),h&&n.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm text-red-300 bg-red-500/10 border border-red-500/30 rounded-lg px-3 py-2",children:[n.jsx("span",{children:f}),n.jsx("button",{onClick:()=>c(),className:"text-xs font-semibold text-red-200 underline",children:"Retry"})]}),!o&&!h&&i&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${Hi(i.compliance)}`,children:i.compliance?"Compliant":"Non-Compliant"}),i.violations.length>0&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-300",children:[n.jsx(kn,{className:"w-4 h-4"}),i.violations[0]]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-xs uppercase mb-1",children:"Current Balance"}),n.jsx("p",{className:"font-semibold text-slate-100",children:pe(i.balance)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-xs uppercase mb-1",children:"Total PnL"}),n.jsx("p",{className:`font-semibold ${i.total_pnl>=0?"text-emerald-400":"text-red-400"}`,children:pe(i.total_pnl)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-xs uppercase mb-1",children:"Start Balance"}),n.jsx("p",{className:"font-semibold text-slate-100",children:pe(i.start_balance)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-xs uppercase mb-1",children:"Trailing Loss"}),n.jsx("p",{className:`font-semibold ${i.trailing_loss>0?"text-amber-300":"text-slate-200"}`,children:pe(i.trailing_loss)})]})]}),b&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[n.jsx("span",{children:"Daily Loss Limit"}),n.jsxs("span",{children:[pe(b.used)," / ",pe(b.limit)]})]}),n.jsx("div",{className:"h-2 rounded bg-slate-700 overflow-hidden",children:n.jsx("div",{className:`h-full ${Ds(b.violated,b.pct)}`,style:{width:`${b.pct*100}%`}})}),n.jsx("p",{className:"text-xs text-slate-500",children:b.limit===null?"No daily loss limit configured":`Remaining: ${pe(b.remaining)} (${As.format(1-b.pct)})`})]}),v&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[n.jsx("span",{children:"Maximum Loss Limit"}),n.jsxs("span",{children:[pe(v.used)," / ",pe(v.limit)]})]}),n.jsx("div",{className:"h-2 rounded bg-slate-700 overflow-hidden",children:n.jsx("div",{className:`h-full ${Ds(v.violated,v.pct)}`,style:{width:`${v.pct*100}%`}})}),n.jsx("p",{className:"text-xs text-slate-500",children:v.limit===null?"No maximum loss limit configured":`Remaining: ${pe(v.remaining)} (${As.format(1-v.pct)})`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 uppercase",children:[n.jsx(Xt,{className:"w-4 h-4 text-slate-300"}),"Recent Risk Events"]}),m.length===0?n.jsx("div",{className:"text-xs text-slate-500 bg-slate-900/60 border border-slate-700/60 rounded-lg px-3 py-2",children:"No recent risk events"}):n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:m.map(g=>n.jsxs("div",{className:`px-3 py-2 rounded-lg text-xs ${Ki[g.level]}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"font-semibold",children:g.message}),n.jsx("span",{className:"text-slate-300/80",children:Ls(g.timestamp)})]}),g.meta&&n.jsx("pre",{className:"text-xs text-slate-300/70 whitespace-pre-wrap",children:JSON.stringify(g.meta,null,2)})]},g.id))})]})]})]})]})}const zi=e=>{if(!e)return"";try{const t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4);return a<1?"Just now":a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:t.toLocaleString()}catch{return e}},Vi=e=>{switch(e){case"success":return n.jsx(Xt,{className:"w-4 h-4 text-emerald-400"});case"warning":return n.jsx(kn,{className:"w-4 h-4 text-amber-400"});case"error":return n.jsx(De,{className:"w-4 h-4 text-red-400"});default:return n.jsx(Rn,{className:"w-4 h-4 text-blue-400"})}},Ji=e=>{switch(e){case"success":return"bg-emerald-500/10 border-emerald-500/30 text-emerald-200";case"warning":return"bg-amber-500/10 border-amber-500/30 text-amber-200";case"error":return"bg-red-500/10 border-red-500/30 text-red-200";default:return"bg-blue-500/10 border-blue-500/30 text-blue-200"}};function Gi(){const{selectedAccount:e}=be(),t=e==null?void 0:e.id,r=de(),[s,a]=w.useState(!0),[i,o]=w.useState(0),{data:l,isLoading:c,error:u}=ne(["notifications",t],()=>di.getNotifications(t),{enabled:!!t,staleTime:1e4,refetchInterval:3e4,keepPreviousData:!0});w.useEffect(()=>{const b=v=>{!v||!v.notification||t&&v.account_id&&String(v.account_id)!==String(t)||(r.invalidateQueries(["notifications",t]),s||o(m=>m+1))};return q.on("notification",b),()=>{q.off("notification",b)}},[t,r,s]),w.useEffect(()=>{s&&o(0)},[s]);const h=(l==null?void 0:l.notifications)||[],f=h.length>0;return n.jsxs("div",{className:"fixed right-4 top-20 z-40 w-80",children:[n.jsxs("button",{onClick:()=>a(!s),className:`w-full flex items-center justify-between px-4 py-2 rounded-t-lg border transition-colors ${s?"bg-slate-800 border-slate-600 text-slate-200":"bg-slate-700 hover:bg-slate-600 border-slate-500 text-slate-300"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vi,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Notifications"}),i>0&&n.jsx("span",{className:"px-1.5 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full min-w-[1.25rem] text-center",children:i})]}),s?n.jsx(Nt,{className:"w-4 h-4"}):n.jsx(Ye,{className:"w-4 h-4"})]}),s&&n.jsx("div",{className:"bg-slate-800 border-x border-b border-slate-600 rounded-b-lg shadow-xl max-h-[32rem] flex flex-col",children:c?n.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"Loading notifications..."}):u?n.jsx("div",{className:"p-4 text-center text-red-400 text-sm",children:"Failed to load notifications"}):f?n.jsx("div",{className:"overflow-y-auto flex-1",children:h.map(b=>n.jsx("div",{className:`p-3 border-b border-slate-700/50 ${Ji(b.level)}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"mt-0.5",children:Vi(b.level)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium",children:b.message}),b.meta&&n.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:[b.meta.symbol&&n.jsxs("span",{className:"mr-2",children:["Symbol: ",b.meta.symbol]}),b.meta.side&&n.jsxs("span",{className:"mr-2",children:["Side: ",b.meta.side]}),b.meta.quantity&&n.jsxs("span",{children:["Qty: ",b.meta.quantity]})]}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:zi(b.timestamp)})]})]})},b.id))}):n.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"No notifications"})})]})}function Yi(){const e=de(),{accounts:t,selectedAccount:r,setSelectedAccount:s}=be(),{status:a,reconnectAttempts:i,lastError:o,reconnect:l}=bi();Cn();const c=r==null?void 0:r.id,{data:u}=ne(["accountInfo",c],Gt.getAccountInfo,{enabled:!!c,staleTime:6e4,refetchOnWindowFocus:!1}),{data:h}=ne(["metrics"],li.getMetrics,{refetchInterval:a==="connected"?!1:6e4,staleTime:3e4,refetchOnWindowFocus:!1}),f=(h==null?void 0:h.performance)||h;w.useEffect(()=>{let m=!0;const g=y=>{if(!m||!y)return;const p={id:y.account_id||y.accountId||y.id,name:y.account_name||y.name,status:y.status||"active",balance:Number(y.balance??0),currency:y.currency||"USD",account_type:y.account_type||"unknown",equity:Number(y.equity??y.balance??0),dailyPnL:Number(y.dailyPnL??y.daily_pnl??0),daily_pnl:Number(y.dailyPnL??y.daily_pnl??0)};p.id&&(e.setQueryData(["accountInfo",p.id],p),e.setQueryData(["accounts"],O=>O==null?void 0:O.map(C=>(C.id||C.accountId||C.account_id)===p.id?{...C,...p}:C)))},j=y=>{if(!m||!y)return;const p=y.performance||y;e.setQueryData(["metrics"],p)},E=y=>{!m||!y||c&&e.setQueryData(["positions",c],y)},R=y=>{!m||!y||Array.isArray(y)&&e.setQueryData(["accounts"],y)};return q.on("account_update",g),q.on("metrics_update",j),q.on("position_update",E),q.on("accounts_update",R),()=>{m=!1,q.off("account_update",g),q.off("metrics_update",j),q.off("position_update",E),q.off("accounts_update",R)}},[e,c]);const b=w.useMemo(()=>{switch(a){case"connected":return{label:"Connected",container:"bg-green-500/20 text-green-300",dot:"bg-green-400"};case"reconnecting":return{label:`Reconnecting (${i})`,container:"bg-amber-500/20 text-amber-200",dot:"bg-amber-300"};case"error":return{label:"Connection Error",container:"bg-red-500/20 text-red-300",dot:"bg-red-400"};default:return{label:"Disconnected",container:"bg-red-500/20 text-red-300",dot:"bg-red-400"}}},[a,i]),v=a==="error"||a==="disconnected";return n.jsxs("div",{className:"space-y-6",children:[n.jsx(Gi,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),n.jsx("p",{className:"text-slate-400 mt-1",children:"Real-time trading overview"})]}),n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:`flex items-center gap-3 px-4 py-2 rounded-lg ${b.container}`,children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${b.dot}`}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-medium",children:b.label}),o&&n.jsx("span",{className:"text-xs text-red-200 truncate max-w-[200px]",children:o})]}),v&&n.jsx("button",{onClick:l,className:"ml-2 text-xs font-semibold text-primary-300 underline",children:"Retry"})]})})]}),n.jsx("div",{className:"max-w-md",children:n.jsx(es,{accounts:t,selectedAccount:r,onAccountChange:s})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(Rt,{to:"/strategies",className:"flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors text-sm font-medium",children:[n.jsx(Yt,{className:"w-4 h-4"}),"Manage Strategies",n.jsx(Ts,{className:"w-3 h-3"})]}),n.jsxs(Rt,{to:"/positions",className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors text-sm font-medium",children:["View All Positions & Orders",n.jsx(Ts,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u&&n.jsx(_i,{account:u,isSelected:!0}),n.jsx(Ai,{}),n.jsx(Ui,{}),n.jsx(Fi,{})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(Wi,{}),f&&n.jsx(Pi,{metrics:f}),n.jsx(Qi,{})]})]})]})}const Xi="MNQ";function Zi({onOrderPlaced:e}){const t=de(),{selectedAccount:r}=be(),[s,a]=w.useState(Xi),[i,o]=w.useState("BUY"),[l,c]=w.useState("market"),[u,h]=w.useState("1"),[f,b]=w.useState(""),[v,m]=w.useState(""),[g,j]=w.useState(!1),[E,R]=w.useState(""),[y,p]=w.useState(""),[O,C]=w.useState(""),[N,U]=w.useState(""),[W,T]=w.useState(!1),[B,Q]=w.useState(!1),[P,H]=w.useState("DAY"),[F,D]=w.useState(null),[re,M]=w.useState(null),J=r==null?void 0:r.id,ce=ee(Ke.placeOrder,{onSuccess:()=>{M("Order submitted successfully"),D(null),t.invalidateQueries(["orders",J]),t.invalidateQueries(["positions",J]),e&&e()},onError:_=>{var G,z;console.error("Failed to submit order",_);const ue=((z=(G=_==null?void 0:_.response)==null?void 0:G.data)==null?void 0:z.error)||(_==null?void 0:_.message)||"Failed to submit order";D(ue),M(null)}}),Z=ee(_=>Ke.cancelAll(_),{onSuccess:()=>{t.invalidateQueries(["orders",J]),M("Cancelled all open orders"),D(null)},onError:_=>{var G,z;const ue=((z=(G=_==null?void 0:_.response)==null?void 0:G.data)==null?void 0:z.error)||(_==null?void 0:_.message)||"Failed to cancel orders";D(ue),M(null)}}),ae=ee(xe.flattenAll,{onSuccess:()=>{t.invalidateQueries(["positions",J]),t.invalidateQueries(["orders",J]),M("Flatten command sent"),D(null)},onError:_=>{var G,z;const ue=((z=(G=_==null?void 0:_.response)==null?void 0:G.data)==null?void 0:z.error)||(_==null?void 0:_.message)||"Failed to flatten positions";D(ue),M(null)}}),je=()=>{b(""),m(""),R(""),p(""),C(""),U(""),j(!1),T(!1),Q(!1),H("DAY")},ge=_=>{if(_.preventDefault(),!J){D("Select an account before placing orders"),M(null);return}if(!s.trim()){D("Symbol is required"),M(null);return}const ue=Number(u);if(!Number.isFinite(ue)||ue<=0){D("Quantity must be greater than 0"),M(null);return}const G={symbol:s,side:i,quantity:Math.floor(ue),order_type:l,account_id:J,time_in_force:P,reduce_only:B};if(l==="limit"){const z=Number(f);if(!Number.isFinite(z)||z<=0){D("Limit price required for limit orders"),M(null);return}G.limit_price=z}if(l==="stop"){const z=Number(v);if(!Number.isFinite(z)||z<=0){D("Stop price required for stop orders"),M(null);return}G.stop_price=z}if(g)if(l==="stop"){const z=O?Number(O):void 0,Ne=N?Number(N):void 0;if(!z||!Ne){D("Stop loss and take profit prices are required for stop-entry brackets"),M(null);return}G.stop_loss_price=z,G.take_profit_price=Ne,G.enable_bracket=!0,G.enable_breakeven=W}else{const z=E?Number(E):void 0,Ne=y?Number(y):void 0;if(!z&&!Ne){D("Provide stop-loss and/or take-profit ticks for bracket orders"),M(null);return}z&&(G.stop_loss_ticks=Math.floor(z)),Ne&&(G.take_profit_ticks=Math.floor(Ne)),G.enable_bracket=!0}ce.mutate(G,{onSuccess:()=>{je()}})},ye=ce.isLoading,qe=!J;return n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Quick Order Ticket"}),n.jsx("p",{className:"text-slate-400 text-sm",children:"Place discretionary trades directly from the dashboard"})]})}),F&&n.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded border border-red-500/40 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:[n.jsx(De,{className:"h-4 w-4"}),n.jsx("span",{children:F})]}),re&&n.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:[n.jsx(Xt,{className:"h-4 w-4"}),n.jsx("span",{children:re})]}),n.jsxs("form",{className:"space-y-5",onSubmit:ge,children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Symbol"}),n.jsx("input",{type:"text",value:s,onChange:_=>a(_.target.value.toUpperCase()),className:"mt-1 w-full rounded bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",placeholder:"MNQ"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Quantity"}),n.jsx("input",{type:"number",min:1,value:u,onChange:_=>h(_.target.value),className:"mt-1 w-full rounded bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Side"}),n.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[n.jsx("button",{type:"button",onClick:()=>o("BUY"),className:`rounded px-3 py-2 text-sm font-semibold transition-colors ${i==="BUY"?"bg-emerald-500/30 text-emerald-200 ring-1 ring-emerald-400/60":"bg-slate-900 text-slate-300 hover:bg-slate-700/60"}`,children:"Buy"}),n.jsx("button",{type:"button",onClick:()=>o("SELL"),className:`rounded px-3 py-2 text-sm font-semibold transition-colors ${i==="SELL"?"bg-red-500/30 text-red-200 ring-1 ring-red-400/60":"bg-slate-900 text-slate-300 hover:bg-slate-700/60"}`,children:"Sell"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Order Type"}),n.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"mt-1 w-full rounded bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",children:[n.jsx("option",{value:"market",children:"Market"}),n.jsx("option",{value:"limit",children:"Limit"}),n.jsx("option",{value:"stop",children:"Stop Entry"})]})]})]}),l==="limit"&&n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Limit Price"}),n.jsx("input",{type:"number",value:f,onChange:_=>b(_.target.value),className:"mt-1 w-full rounded bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",placeholder:"Enter price"})]})}),l==="stop"&&n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Stop Price"}),n.jsx("input",{type:"number",value:v,onChange:_=>m(_.target.value),className:"mt-1 w-full rounded bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",placeholder:"Entry stop price"})]})}),n.jsxs("div",{className:"rounded border border-slate-700/60 bg-slate-900/40 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-200",children:[n.jsx("input",{type:"checkbox",checked:g,onChange:_=>j(_.target.checked),className:"h-4 w-4 rounded border-slate-600 bg-slate-800 text-primary-500 focus:ring-primary-500"}),"Attach Bracket"]}),n.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Optional"})]}),g&&l!=="stop"&&n.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Stop Loss (ticks)"}),n.jsx("input",{type:"number",value:E,onChange:_=>R(_.target.value),className:"mt-1 w-full rounded bg-slate-950 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",placeholder:"e.g. 40"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Take Profit (ticks)"}),n.jsx("input",{type:"number",value:y,onChange:_=>p(_.target.value),className:"mt-1 w-full rounded bg-slate-950 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",placeholder:"e.g. 80"})]})]}),g&&l==="stop"&&n.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Stop Loss Price"}),n.jsx("input",{type:"number",value:O,onChange:_=>C(_.target.value),className:"mt-1 w-full rounded bg-slate-950 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",placeholder:"Stop loss price"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Take Profit Price"}),n.jsx("input",{type:"number",value:N,onChange:_=>U(_.target.value),className:"mt-1 w-full rounded bg-slate-950 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",placeholder:"Take profit price"})]}),n.jsx("div",{className:"flex items-center",children:n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-200",children:[n.jsx("input",{type:"checkbox",checked:W,onChange:_=>T(_.target.checked),className:"h-4 w-4 rounded border-slate-600 bg-slate-800 text-primary-500 focus:ring-primary-500"}),"Enable Breakeven"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs uppercase tracking-wide text-slate-400",children:"Time in Force"}),n.jsxs("select",{value:P,onChange:_=>H(_.target.value),className:"mt-1 w-full rounded bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-primary-500",children:[n.jsx("option",{value:"DAY",children:"DAY"}),n.jsx("option",{value:"GTC",children:"GTC"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-200",children:[n.jsx("input",{type:"checkbox",checked:B,onChange:_=>Q(_.target.checked),className:"h-4 w-4 rounded border-slate-600 bg-slate-800 text-primary-500 focus:ring-primary-500"}),"Reduce-Only"]})})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-2",children:[n.jsxs("button",{type:"submit",disabled:ye||qe,className:"inline-flex items-center gap-2 rounded bg-primary-500 px-4 py-2 text-sm font-semibold text-slate-950 transition-colors hover:bg-primary-400 disabled:cursor-not-allowed disabled:bg-slate-600 disabled:text-slate-300",children:[ye&&n.jsx(Ae,{className:"h-4 w-4 animate-spin"}),"Place Order"]}),n.jsxs("button",{type:"button",onClick:()=>Z.mutate(J),disabled:Z.isLoading||qe,className:"inline-flex items-center gap-2 rounded border border-slate-600 px-4 py-2 text-sm font-semibold text-slate-200 transition-colors hover:bg-slate-700 disabled:cursor-not-allowed disabled:text-slate-400",children:[Z.isLoading&&n.jsx(Ae,{className:"h-4 w-4 animate-spin"}),"Cancel All Orders"]}),n.jsxs("button",{type:"button",onClick:()=>ae.mutate(),disabled:ae.isLoading||qe,className:"inline-flex items-center gap-2 rounded border border-red-600/60 px-4 py-2 text-sm font-semibold text-red-300 transition-colors hover:bg-red-500/10 disabled:cursor-not-allowed disabled:text-red-500/60",children:[ae.isLoading&&n.jsx(Ae,{className:"h-4 w-4 animate-spin"}),"Flatten Positions"]})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Brackets on market/limit orders use tick offsets. Stop entries require explicit pricing for the attached OCO legs."})]})]})}function eo(){const{accounts:e,selectedAccount:t,setSelectedAccount:r}=be(),s=t==null?void 0:t.id,a=de();Cn();const{data:i=[],isLoading:o}=ne(["positions",s],xe.getPositions,{enabled:!!s,staleTime:3e4,refetchInterval:1e4}),{data:l=[],isLoading:c}=ne(["orders",s],Ke.getOrders,{enabled:!!s,staleTime:3e4,refetchInterval:1e4}),[u,h]=w.useState(null),[f,b]=w.useState(""),[v,m]=w.useState(""),[g,j]=w.useState({}),[E,R]=w.useState({}),[y,p]=w.useState({}),[O,C]=w.useState(null),[N,U]=w.useState(null),[W,T]=w.useState({}),[B,Q]=w.useState({}),[P,H]=w.useState({}),F=(d,S)=>{U({type:d,message:S}),window.setTimeout(()=>U(null),4e3)},D=ee(d=>Ke.cancelOrder(d),{onSuccess:(d,S)=>{a.invalidateQueries(["orders",s]),S?F("success",`Cancel request sent for order ${S}`):F("success","Cancel request sent")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to cancel order";F("error",S)}}),re=ee(({orderId:d,updates:S})=>Ke.modifyOrder(d,S),{onSuccess:(d,S)=>{a.invalidateQueries(["orders",s]),h(null),b(""),m(""),F("success",`Order ${S.orderId} updated`)},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to modify order";F("error",S)}}),M=ee(({positionId:d,quantity:S})=>xe.closePosition(d,S),{onSuccess:(d,S)=>{a.invalidateQueries(["positions",s]),S.quantity?(j(k=>({...k,[S.positionId]:""})),F("success",`Partial close submitted for ${S.quantity} contracts`)):F("success","Close position request sent")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to close position";F("error",S)}}),J=ee(({positionId:d,stopPrice:S})=>xe.modifyStopLoss(d,S),{onSuccess:(d,S)=>{a.invalidateQueries(["positions",s]),R(k=>({...k,[S.positionId]:""})),F("success","Stop loss updated")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to update stop loss";F("error",S)}}),ce=ee(({positionId:d,takeProfit:S})=>xe.modifyTakeProfit(d,S),{onSuccess:(d,S)=>{a.invalidateQueries(["positions",s]),p(k=>({...k,[S.positionId]:""})),F("success","Take profit updated")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to update take profit";F("error",S)}}),Z=ee(({positionId:d,trailAmount:S})=>xe.enableTrailingStop(d,S),{onSuccess:(d,S)=>{a.invalidateQueries(["positions",s]),a.invalidateQueries(["orders",s]),T(k=>({...k,[S.positionId]:""})),Q(k=>({...k,[S.positionId]:!0})),F("success","Trailing stop enabled")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to enable trailing stop";F("error",S)}}),ae=ee(d=>xe.disableTrailingStop(d),{onSuccess:(d,S)=>{a.invalidateQueries(["positions",s]),a.invalidateQueries(["orders",s]),Q(k=>({...k,[S]:!1})),F("success","Trailing stop disabled")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to disable trailing stop";F("error",S)}}),je=ee(d=>xe.enableBreakeven(d),{onSuccess:(d,S)=>{a.invalidateQueries(["positions",s]),H(k=>({...k,[S]:!0})),F("success","Breakeven enabled - stop moved to entry price")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to enable breakeven";F("error",S)}}),ge=ee(d=>xe.disableBreakeven(d),{onSuccess:(d,S)=>{a.invalidateQueries(["positions",s]),H(k=>({...k,[S]:!1})),F("success","Breakeven disabled")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to disable breakeven";F("error",S)}}),ye=ee(({symbol:d,quantity:S,accountName:k})=>hi.testOvernightBreakout(d,S,k),{onSuccess:()=>{a.invalidateQueries(["positions",s]),a.invalidateQueries(["orders",s]),F("success","Overnight breakout test executed")},onError:d=>{var k,A;const S=((A=(k=d==null?void 0:d.response)==null?void 0:k.data)==null?void 0:A.error)||(d==null?void 0:d.message)||"Failed to execute test";F("error",S)}}),qe=(d,S)=>{if(!d){F("error","Unable to close position: missing identifier");return}confirm("Are you sure you want to close this entire position?")&&M.mutate({positionId:d,quantity:S})},_=d=>{confirm("Are you sure you want to cancel this order?")&&D.mutate(d)},ue=d=>{h({id:d.id,price:d.price,quantity:d.quantity}),b(d.price?d.price.toString():""),m(d.quantity?d.quantity.toString():"")},G=()=>{var S,k;if(!u)return;const d={};if(f&&f!==((S=u.price)==null?void 0:S.toString())&&(d.price=parseFloat(f)),v&&v!==((k=u.quantity)==null?void 0:k.toString())&&(d.quantity=parseInt(v)),Object.keys(d).length===0){h(null);return}re.mutate({orderId:u.id,updates:d})},z=d=>{if(!d.id){F("error","Position ID missing");return}const S=g[d.id]||"",k=parseInt(S,10);if(!Number.isFinite(k)||k<=0){F("error","Enter a valid quantity for partial close");return}if(k>d.quantity){F("error","Quantity exceeds current position size");return}M.mutate({positionId:d.id,quantity:k})},Ne=d=>{if(!d.id){F("error","Position ID missing");return}const S=E[d.id]||"",k=parseFloat(S);if(!Number.isFinite(k)){F("error","Enter a valid stop loss price");return}J.mutate({positionId:d.id,stopPrice:k})},Fn=d=>{if(!d.id){F("error","Position ID missing");return}const S=y[d.id]||"",k=parseFloat(S);if(!Number.isFinite(k)){F("error","Enter a valid take profit price");return}ce.mutate({positionId:d.id,takeProfit:k})},Tn=d=>{if(!d){F("error","Raw details unavailable for this position");return}C(S=>S===d?null:d)},An=d=>{if(!d.id){F("error","Position ID missing");return}if(B[d.id])ae.mutate(d.id);else{const k=W[d.id]||"",A=parseFloat(k);if(!Number.isFinite(A)||A<=0){F("error","Enter a valid trail amount (e.g., 25.00)");return}Z.mutate({positionId:d.id,trailAmount:A})}},Ln=d=>{if(!d.id){F("error","Position ID missing");return}P[d.id]?ge.mutate(d.id):je.mutate(d.id)},ts=o||c;return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Positions & Orders"}),n.jsx("p",{className:"text-slate-400 mt-2",children:"Monitor and manage your open positions and orders"})]})}),N&&n.jsx("div",{className:`rounded-lg border px-4 py-2 text-sm ${N.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-red-500/40 bg-red-500/10 text-red-300"}`,children:N.message}),n.jsx("div",{className:"max-w-md",children:n.jsx(es,{accounts:e,selectedAccount:t,onAccountChange:r})}),n.jsx(Zi,{}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Bt,{className:"w-5 h-5"}),"Automation Tools"]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>ye.mutate({symbol:"MNQ",quantity:1,accountName:"PRAC"}),className:"px-4 py-2 bg-blue-500/20 text-blue-300 rounded hover:bg-blue-500/30 transition-colors flex items-center gap-2",disabled:ye.isLoading||!s,children:[n.jsx(_n,{className:"w-4 h-4"}),ye.isLoading?"Testing...":"Test Overnight Breakout"]}),n.jsx("p",{className:"text-sm text-slate-400",children:"Simulates overnight breakout trades on practice account (MNQ, 1 contract)"})]})})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Open Positions (",i.length,")"]}),ts?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),n.jsx("p",{className:"text-slate-400 mt-2",children:"Loading positions..."})]}):i.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-400",children:[n.jsx(De,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No open positions"})]}):n.jsx("div",{className:"space-y-3",children:i.map(d=>{const S=d.side==="LONG",k=Number(d.unrealized_pnl??0),A=Number(d.realized_pnl??0),Xe=Number(d.entry_price??0),Ze=Number(d.current_price??Xe),_e=k>=0?wt:Zt,Pe=k>=0?"text-green-400":"text-red-400",ie=d.id??"",Qe=ie?g[ie]??"":"",Dn=ie?E[ie]??"":"",Mn=ie?y[ie]??"":"",$n=ie?W[ie]??"":"",St=ie?B[ie]??!1:!1,ss=ie?P[ie]??!1:!1,In=d.timestamp?new Date(d.timestamp).toLocaleString():"",Un=typeof d.unrealized_pnl_pct=="number"&&isFinite(d.unrealized_pnl_pct)?`${d.unrealized_pnl_pct.toFixed(2)}%`:"",ns=typeof d.tick_size=="number"&&isFinite(d.tick_size)?d.tick_size:null,rs=typeof d.point_value=="number"&&isFinite(d.point_value)?d.point_value:null,fe=!!d.id,as=O===d.id;return n.jsxs("div",{className:"p-4 bg-slate-700/50 rounded-lg border border-slate-600 hover:border-slate-500 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${S?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:d.side}),n.jsx("span",{className:"font-semibold",children:d.symbol}),n.jsxs("span",{className:"text-slate-400 text-sm",children:["x",Number(d.quantity??0)]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:`flex items-center gap-1 ${Pe}`,children:[n.jsx(_e,{className:"w-4 h-4"}),n.jsxs("span",{className:"font-semibold",children:["$",k.toFixed(2)]})]}),n.jsxs("button",{onClick:()=>qe(d.id),className:"px-3 py-1 text-xs bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors flex items-center gap-1",disabled:!fe||M.isLoading,children:[n.jsx(Ri,{className:"w-3 h-3"}),"Close"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 xl:grid-cols-6 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Entry"}),n.jsxs("p",{className:"font-semibold",children:["$",Xe.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Current"}),n.jsxs("p",{className:"font-semibold",children:["$",Ze.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Realized P&L"}),n.jsxs("p",{className:`font-semibold ${A>=0?"text-green-400":"text-red-400"}`,children:["$",A.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Unrealized %"}),n.jsx("p",{className:"font-semibold text-slate-200",children:Un})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Stop Loss"}),n.jsx("p",{className:"font-semibold text-slate-200",children:d.stop_loss!==void 0&&d.stop_loss!==null?`$${Number(d.stop_loss).toFixed(2)}`:""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Take Profit"}),n.jsx("p",{className:"font-semibold text-slate-200",children:d.take_profit!==void 0&&d.take_profit!==null?`$${Number(d.take_profit).toFixed(2)}`:""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Opened"}),n.jsx("p",{className:"font-semibold text-slate-200",children:In})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Tick Size"}),n.jsx("p",{className:"font-semibold text-slate-200",children:ns?ns.toFixed(4):""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Point Value"}),n.jsx("p",{className:"font-semibold text-slate-200",children:rs?`$${rs.toFixed(2)}`:""})]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-xs uppercase tracking-wide",children:"Adjust Stop Loss"}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("input",{type:"number",value:Dn,onChange:Se=>{d.id&&R(Ce=>({...Ce,[d.id]:Se.target.value}))},placeholder:"New stop price",className:"w-28 px-2 py-1 text-xs bg-slate-900 border border-slate-600 rounded text-slate-200",disabled:!fe}),n.jsx("button",{onClick:()=>Ne(d),className:"px-3 py-1 text-xs bg-blue-500/20 text-blue-300 rounded hover:bg-blue-500/30 transition-colors",disabled:!fe||J.isLoading,children:"Update SL"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-xs uppercase tracking-wide",children:"Adjust Take Profit"}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("input",{type:"number",value:Mn,onChange:Se=>{d.id&&p(Ce=>({...Ce,[d.id]:Se.target.value}))},placeholder:"New target price",className:"w-28 px-2 py-1 text-xs bg-slate-900 border border-slate-600 rounded text-slate-200",disabled:!fe}),n.jsx("button",{onClick:()=>Fn(d),className:"px-3 py-1 text-xs bg-green-500/20 text-green-300 rounded hover:bg-green-500/30 transition-colors",disabled:!fe||ce.isLoading,children:"Update TP"})]})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:1,value:Qe,onChange:Se=>{d.id&&j(Ce=>({...Ce,[d.id]:Se.target.value}))},placeholder:"Qty",className:"w-20 px-2 py-1 text-xs bg-slate-900 border border-slate-600 rounded text-slate-200",disabled:!fe}),n.jsx("button",{onClick:()=>z(d),className:"px-3 py-1 text-xs bg-amber-500/20 text-amber-300 rounded hover:bg-amber-500/30 transition-colors",disabled:!fe||M.isLoading,children:"Partial Close"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",step:"0.01",value:$n,onChange:Se=>{d.id&&T(Ce=>({...Ce,[d.id]:Se.target.value}))},placeholder:"Trail $",className:"w-24 px-2 py-1 text-xs bg-slate-900 border border-slate-600 rounded text-slate-200",disabled:!fe||St}),n.jsxs("button",{onClick:()=>An(d),className:`px-3 py-1 text-xs rounded transition-colors flex items-center gap-1 ${St?"bg-red-500/20 text-red-300 hover:bg-red-500/30":"bg-purple-500/20 text-purple-300 hover:bg-purple-500/30"}`,disabled:!fe||Z.isLoading||ae.isLoading,children:[n.jsx(Bt,{className:"w-3 h-3"}),St?"Disable Trail":"Enable Trail"]})]}),n.jsxs("button",{onClick:()=>Ln(d),className:`px-3 py-1 text-xs rounded transition-colors flex items-center gap-1 ${ss?"bg-green-500/20 text-green-300 hover:bg-green-500/30":"bg-slate-600/40 text-slate-200 hover:bg-slate-600/60"}`,disabled:!fe||je.isLoading||ge.isLoading,children:[n.jsx(Oi,{className:"w-3 h-3"}),ss?"Breakeven ON":"Set Breakeven"]}),n.jsx("button",{onClick:()=>Tn(d.id),className:"px-3 py-1 text-xs bg-slate-600/40 text-slate-200 rounded hover:bg-slate-600/60 transition-colors flex items-center gap-1",children:as?n.jsxs(n.Fragment,{children:[n.jsx(Nt,{className:"w-3 h-3"})," Hide Details"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ye,{className:"w-3 h-3"})," View Details"]})})]}),as&&n.jsxs("div",{className:"mt-3 bg-slate-900/60 border border-slate-700/70 rounded-lg p-3 text-xs text-left overflow-x-auto",children:[n.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[n.jsx(Rn,{className:"w-4 h-4"}),n.jsx("span",{children:"Raw position payload"})]}),n.jsx("pre",{className:"whitespace-pre-wrap text-slate-200",children:JSON.stringify(d._raw??d,null,2)})]})]},d.id||`${d.symbol}-${d.entry_price}`)})})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Open Orders (",l.length,")"]}),ts?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),n.jsx("p",{className:"text-slate-400 mt-2",children:"Loading orders..."})]}):l.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-400",children:[n.jsx(De,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No open orders"})]}):n.jsx("div",{className:"space-y-3",children:l.map(d=>{const S=d.side==="BUY",k=d.type||"UNKNOWN",A=(d.status||"PENDING").toUpperCase(),Xe=A!=="FILLED"&&A!=="CANCELLED"&&A!=="REJECTED",Ze=d.stop_price?Number(d.stop_price):null,_e=d.stop_loss?Number(d.stop_loss):null,Pe=d.take_profit?Number(d.take_profit):null,ie=_e||Pe?`${_e?`SL $${_e.toFixed(2)}`:""}${_e&&Pe?" / ":""}${Pe?`TP $${Pe.toFixed(2)}`:""}`:"";return n.jsxs("div",{className:"p-4 bg-slate-700/50 rounded-lg border border-slate-600 hover:border-slate-500 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${S?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:d.side}),n.jsx("span",{className:"font-semibold",children:d.symbol}),n.jsxs("span",{className:"text-slate-400 text-sm",children:["x",Number(d.quantity??0)]}),n.jsx("span",{className:`px-2 py-1 rounded text-xs ${A==="FILLED"?"bg-green-500/20 text-green-400":A==="CANCELLED"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:A})]}),Xe&&n.jsx("div",{className:"flex items-center gap-2",children:(u==null?void 0:u.id)===d.id?n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"number",value:f,onChange:Qe=>b(Qe.target.value),placeholder:"Price",className:"w-20 px-2 py-1 text-xs bg-slate-900 border border-slate-600 rounded text-slate-200"}),n.jsx("input",{type:"number",value:v,onChange:Qe=>m(Qe.target.value),placeholder:"Qty",className:"w-16 px-2 py-1 text-xs bg-slate-900 border border-slate-600 rounded text-slate-200"}),n.jsx("button",{onClick:G,className:"px-2 py-1 text-xs bg-green-500/20 text-green-400 rounded hover:bg-green-500/30 transition-colors",disabled:re.isLoading,children:"Save"}),n.jsx("button",{onClick:()=>{h(null),b(""),m("")},className:"px-2 py-1 text-xs bg-slate-600 text-slate-300 rounded hover:bg-slate-500 transition-colors",children:"Cancel"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>ue(d),className:"px-2 py-1 text-xs bg-blue-500/20 text-blue-400 rounded hover:bg-blue-500/30 transition-colors flex items-center gap-1",disabled:re.isLoading,children:[n.jsx(Si,{className:"w-3 h-3"}),"Modify"]}),n.jsxs("button",{onClick:()=>_(d.id),className:"px-3 py-1 text-xs bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors flex items-center gap-1",disabled:D.isLoading,children:[n.jsx(Pn,{className:"w-3 h-3"}),"Cancel"]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm sm:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Type"}),n.jsx("p",{className:"font-semibold",children:k})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Price"}),n.jsx("p",{className:"font-semibold",children:d.price?`$${Number(d.price).toFixed(2)}`:"Market"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Stop"}),n.jsx("p",{className:"font-semibold",children:Ze?`$${Ze.toFixed(2)}`:""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Bracket"}),n.jsx("p",{className:"font-semibold text-xs text-slate-200",children:ie})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Time in Force"}),n.jsx("p",{className:"font-semibold text-slate-200",children:d.time_in_force||"DAY"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Order ID"}),n.jsx("p",{className:"font-mono text-xs text-slate-400 truncate",children:d.id})]})]})]},d.id)})})]})]})}function to(){const{selectedAccount:e}=be(),t=de(),{data:r,isLoading:s}=ne(["strategies"],Fe.getStrategies,{staleTime:3e4,refetchInterval:6e4}),[a,i]=w.useState(null),[o,l]=w.useState(null),[c,u]=w.useState(null),[h,f]=w.useState(null),b=ee(({name:p,symbols:O})=>Fe.startStrategy(p,O,e==null?void 0:e.id),{onSuccess:(p,O)=>{if(t.invalidateQueries(["strategies"]),i(null),p.success)console.log(` Started strategy: ${O}`);else{const C=p.error||p.message||"Unknown error";i(`Failed to start ${O}: ${C}`),console.error(` Failed to start strategy: ${C}`)}},onError:p=>{var C,N;console.error(" Strategy start error (full):",p),console.error(" Error response:",p==null?void 0:p.response),console.error(" Error response data:",(C=p==null?void 0:p.response)==null?void 0:C.data);let O="Unknown error";(N=p==null?void 0:p.response)!=null&&N.data?O=p.response.data.error||p.response.data.message||JSON.stringify(p.response.data)||"Unknown error":p!=null&&p.message&&(O=p.message),i(`Failed to start strategy: ${O}`)}}),v=ee(({name:p})=>Fe.stopStrategy(p,e==null?void 0:e.id),{onSuccess:(p,O)=>{if(t.invalidateQueries(["strategies"]),i(null),p.success)console.log(` Stopped strategy: ${O}`);else{const C=p.error||p.message||"Unknown error";i(`Failed to stop ${O}: ${C}`),console.error(` Failed to stop strategy: ${C}`)}},onError:p=>{var C,N;console.error(" Strategy stop error (full):",p),console.error(" Error response:",p==null?void 0:p.response),console.error(" Error response data:",(C=p==null?void 0:p.response)==null?void 0:C.data);let O="Unknown error";(N=p==null?void 0:p.response)!=null&&N.data?O=p.response.data.error||p.response.data.message||JSON.stringify(p.response.data)||"Unknown error":p!=null&&p.message&&(O=p.message),i(`Failed to stop strategy: ${O}`)}}),m=(p,O)=>{const C=r==null?void 0:r.find(T=>T.name===p),N=(C==null?void 0:C.symbols)??[],U=(O||"").toLowerCase();(C==null?void 0:C.enabled)??["running","active","enabled","started"].includes(U)?v.mutate({name:p}):b.mutate({name:p,symbols:N})},{data:g,isLoading:j}=ne(["strategy-stats",c,e==null?void 0:e.id],()=>Fe.getStrategyStats(c,e==null?void 0:e.id),{enabled:!!c&&!!e,staleTime:3e4}),{data:E,isLoading:R}=ne(["strategy-logs",h],()=>Fe.getStrategyLogs(h,50),{enabled:!!h,staleTime:1e4,refetchInterval:3e4}),y=ee(({name:p})=>Fe.testStrategy(p,e==null?void 0:e.id),{onSuccess:()=>{t.invalidateQueries(["strategies"])}});return s?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-slate-400",children:"Loading strategies..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Strategies"}),n.jsx("p",{className:"text-slate-400",children:"Manage your trading strategies"})]}),a&&n.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(De,{className:"w-5 h-5 text-red-400"}),n.jsx("p",{className:"text-red-400 text-sm",children:a})]}),n.jsx("button",{onClick:()=>i(null),className:"text-red-400 hover:text-red-300",children:n.jsx(Pn,{className:"w-4 h-4"})})]}),!e&&n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:n.jsx("p",{className:"text-yellow-500 text-sm",children:" Please select an account to manage strategies"})}),n.jsx("div",{className:"space-y-4",children:r&&r.length>0?r.map(p=>{var O,C,N,U,W;return n.jsx("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 hover:border-slate-600 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:p.name}),(()=>{const T=(p.status||"").toLowerCase(),B=p.is_running??["running","active","started"].includes(T),Q=p.enabled??["running","active","enabled","started"].includes(T),P=B?"bg-green-500/20 text-green-400":Q?"bg-blue-500/20 text-blue-400":"bg-slate-600/50 text-slate-400",H=B?"running":Q?"enabled":T||"disabled";return n.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${P}`,children:H})})()]}),n.jsxs("div",{className:"text-sm text-slate-400 space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Symbols:"})," ",p.symbols&&p.symbols.length>0?p.symbols.join(", "):"N/A"]}),p.description&&n.jsx("p",{className:"mt-2",children:p.description})]}),p.stats&&n.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[n.jsxs("div",{className:"bg-slate-900/50 rounded p-2",children:[n.jsx("p",{className:"text-slate-500",children:"Trades"}),n.jsx("p",{className:"font-semibold",children:p.stats.total_trades||0})]}),n.jsxs("div",{className:"bg-slate-900/50 rounded p-2",children:[n.jsx("p",{className:"text-slate-500",children:"Win Rate"}),n.jsx("p",{className:"font-semibold",children:p.stats.win_rate?`${p.stats.win_rate.toFixed(1)}%`:"N/A"})]}),n.jsxs("div",{className:"bg-slate-900/50 rounded p-2",children:[n.jsx("p",{className:"text-slate-500",children:"Total P&L"}),n.jsx("p",{className:`font-semibold ${(p.stats.total_pnl||0)>=0?"text-green-400":"text-red-400"}`,children:p.stats.total_pnl?`$${p.stats.total_pnl.toFixed(2)}`:"$0.00"})]}),n.jsxs("div",{className:"bg-slate-900/50 rounded p-2",children:[n.jsx("p",{className:"text-slate-500",children:"Avg P&L"}),n.jsx("p",{className:`font-semibold ${(p.stats.avg_pnl||0)>=0?"text-green-400":"text-red-400"}`,children:p.stats.avg_pnl?`$${p.stats.avg_pnl.toFixed(2)}`:"$0.00"})]})]})]}),n.jsx("div",{className:"flex flex-col gap-2",children:(()=>{const T=(p.status||"").toLowerCase(),B=p.enabled??["running","active","enabled","started"].includes(T),Q=b.isLoading||v.isLoading?"Loading...":B?"Disable":"Enable",P=B?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white";return n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>m(p.name,p.status),disabled:b.isLoading||v.isLoading||!e,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${P} disabled:opacity-50 disabled:cursor-not-allowed`,children:Q}),n.jsx("button",{onClick:()=>l(o===p.name?null:p.name),className:"px-4 py-2 rounded-lg font-semibold text-sm transition-colors bg-slate-700 hover:bg-slate-600 text-white flex items-center justify-center gap-2",children:o===p.name?n.jsxs(n.Fragment,{children:[n.jsx(Nt,{className:"w-4 h-4"})," Hide Details"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ye,{className:"w-4 h-4"})," Show Details"]})})]})})()}),o===p.name&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700 space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>{u(p.name),c!==p.name&&f(null)},className:`px-3 py-2 rounded text-sm font-medium transition-colors flex items-center gap-2 ${c===p.name?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-slate-700 hover:bg-slate-600 text-slate-200"}`,children:[n.jsx(En,{className:"w-4 h-4"}),"Stats"]}),n.jsxs("button",{onClick:()=>{f(p.name),h!==p.name&&u(null)},className:`px-3 py-2 rounded text-sm font-medium transition-colors flex items-center gap-2 ${h===p.name?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-slate-700 hover:bg-slate-600 text-slate-200"}`,children:[n.jsx(wi,{className:"w-4 h-4"}),"Logs"]}),n.jsxs("button",{onClick:()=>y.mutate({name:p.name}),disabled:y.isLoading||!e,className:"px-3 py-2 rounded text-sm font-medium transition-colors bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[y.isLoading?n.jsx(Ae,{className:"w-4 h-4 animate-spin"}):n.jsx(_n,{className:"w-4 h-4"}),"Test"]})]}),c===p.name&&n.jsx("div",{className:"bg-slate-900/50 rounded-lg p-4",children:j?n.jsx("div",{className:"text-center py-4 text-slate-400",children:"Loading stats..."}):g&&!g.error?n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Trades"}),n.jsx("p",{className:"text-lg font-semibold",children:g.total_trades||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Win Rate"}),n.jsxs("p",{className:"text-lg font-semibold",children:[((O=g.win_rate)==null?void 0:O.toFixed(1))||0,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total P&L"}),n.jsxs("p",{className:`text-lg font-semibold ${(g.total_pnl||0)>=0?"text-green-400":"text-red-400"}`,children:["$",((C=g.total_pnl)==null?void 0:C.toFixed(2))||"0.00"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Profit Factor"}),n.jsx("p",{className:"text-lg font-semibold",children:((N=g.profit_factor)==null?void 0:N.toFixed(2))||"0.00"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Winning Trades"}),n.jsx("p",{className:"text-lg font-semibold text-green-400",children:g.winning_trades||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Losing Trades"}),n.jsx("p",{className:"text-lg font-semibold text-red-400",children:g.losing_trades||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Best Trade"}),n.jsxs("p",{className:"text-lg font-semibold text-green-400",children:["$",((U=g.best_trade)==null?void 0:U.toFixed(2))||"0.00"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Worst Trade"}),n.jsxs("p",{className:"text-lg font-semibold text-red-400",children:["$",((W=g.worst_trade)==null?void 0:W.toFixed(2))||"0.00"]})]})]}):n.jsx("div",{className:"text-center py-4 text-slate-400",children:(g==null?void 0:g.error)||"No stats available"})}),h===p.name&&n.jsx("div",{className:"bg-slate-900/50 rounded-lg p-4 max-h-96 overflow-y-auto",children:R?n.jsx("div",{className:"text-center py-4 text-slate-400",children:"Loading logs..."}):E!=null&&E.logs&&E.logs.length>0?n.jsx("div",{className:"space-y-2 font-mono text-xs",children:E.logs.map((T,B)=>n.jsxs("div",{className:`p-2 rounded border-l-2 ${T.level==="ERROR"||T.level==="CRITICAL"?"border-red-500 bg-red-500/10":T.level==="WARNING"?"border-yellow-500 bg-yellow-500/10":"border-slate-600 bg-slate-800/50"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-slate-400",children:T.timestamp}),n.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${T.level==="ERROR"||T.level==="CRITICAL"?"bg-red-500/20 text-red-300":T.level==="WARNING"?"bg-yellow-500/20 text-yellow-300":"bg-slate-700 text-slate-300"}`,children:T.level})]}),n.jsx("p",{className:"text-slate-200 break-words",children:T.message})]},B))}):n.jsx("div",{className:"text-center py-4 text-slate-400",children:"No logs available"})})]})]})},p.name)}):n.jsx("div",{className:"bg-slate-800 rounded-lg p-12 border border-slate-700 text-center",children:n.jsx("p",{className:"text-slate-400",children:"No strategies configured"})})})]})}function so(){return n.jsx(to,{})}function no(){const{accounts:e,selectedAccount:t,setSelectedAccount:r}=be(),s=de(),[a,i]=w.useState("auto"),[o,l]=w.useState(!0),[c,u]=w.useState(!0),[h,f]=w.useState("ws://localhost:8081"),[b,v]=w.useState("http://localhost:8080"),[m,g]=w.useState(null),{data:j,isLoading:E}=ne(["settings","global"],()=>Qt.getSettings("global"),{staleTime:6e4,refetchOnWindowFocus:!1});w.useEffect(()=>{if(j!=null&&j.settings){const N=j.settings;i(N.defaultAccount??"auto"),l(N.riskManagementEnabled??!0),u(N.discordNotificationsEnabled??!0),f(N.wsUrl||"ws://localhost:8081"),v(N.apiUrl||"http://localhost:8080")}},[j]);const R=ee(N=>Qt.saveSettings(N),{onSuccess:()=>{s.invalidateQueries(["settings","global"]),g(" Settings saved successfully!"),setTimeout(()=>g(null),3e3)},onError:N=>{console.error("Failed to save settings:",N),g(" Failed to save settings"),setTimeout(()=>g(null),4e3)}}),y=()=>{R.mutate({defaultAccount:a==="auto"?null:a,riskManagementEnabled:o,discordNotificationsEnabled:c,wsUrl:h,apiUrl:b})},p=()=>{l(!o)},O=()=>{u(!c)},C=N=>{r(N),N&&i(String(N.id))};return E?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-slate-400",children:"Loading settings..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),n.jsx("p",{className:"text-slate-400 mt-2",children:"Configure your trading bot"})]}),m&&n.jsx("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg px-4 py-2",children:n.jsx("p",{className:"text-green-400 text-sm",children:m})})]}),n.jsx("div",{className:"max-w-md",children:n.jsx(es,{accounts:e,selectedAccount:t,onAccountChange:C})}),n.jsxs("div",{className:"grid gap-6",children:[n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Account Settings"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Default Account"}),n.jsxs("select",{value:a,onChange:N=>i(N.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-primary-500",children:[n.jsx("option",{value:"auto",children:" Auto-select"}),e.map(N=>{var U;return n.jsxs("option",{value:N.id,children:[N.name," - $",((U=N.balance)==null?void 0:U.toLocaleString())||"0"]},N.id)})]}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"The account to use by default when the bot starts"})]})})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Trading Settings"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Risk Management"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Enable automatic risk controls"})]}),n.jsx("button",{onClick:p,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${o?"bg-green-600 hover:bg-green-500 text-white":"bg-slate-600 hover:bg-slate-500 text-white"}`,children:o?"Enabled":"Disabled"})]}),n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Discord Notifications"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Send trade alerts to Discord"})]}),n.jsx("button",{onClick:O,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${c?"bg-green-600 hover:bg-green-500 text-white":"bg-slate-600 hover:bg-slate-500 text-white"}`,children:c?"Enabled":"Disabled"})]})]})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Settings"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"WebSocket URL"}),n.jsx("input",{type:"text",value:h,onChange:N=>f(N.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-primary-500",placeholder:"ws://localhost:8081"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"WebSocket server for real-time updates"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"API URL"}),n.jsx("input",{type:"text",value:b,onChange:N=>v(N.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-primary-500",placeholder:"http://localhost:8080"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Backend API server URL"})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:y,className:"bg-primary-600 hover:bg-primary-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:R.isLoading,children:R.isLoading?"Saving...":"Save All Settings"})})]})]})}function ro({children:e}){const t=Kn(),r=[{path:"/",icon:En,label:"Dashboard"},{path:"/positions",icon:wt,label:"Positions"},{path:"/strategies",icon:Yt,label:"Strategies"},{path:"/settings",icon:Ci,label:"Settings"}];return n.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",children:[n.jsxs("aside",{className:"fixed left-0 top-0 h-full w-64 bg-slate-800 border-r border-slate-700",children:[n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-primary-400",children:"TopStepX"}),n.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Trading Dashboard"})]}),n.jsx("nav",{className:"mt-8",children:r.map(s=>{const a=s.icon,i=t.pathname===s.path;return n.jsxs(Rt,{to:s.path,className:`flex items-center gap-3 px-6 py-3 transition-colors ${i?"bg-primary-600 text-white border-r-2 border-primary-400":"text-slate-300 hover:bg-slate-700"}`,children:[n.jsx(a,{className:"w-5 h-5"}),n.jsx("span",{children:s.label})]},s.path)})})]}),n.jsx("main",{className:"ml-64 p-8",children:e})]})}const ao=new Nr({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});function io(){return n.jsx(Or,{client:ao,children:n.jsx(xi,{children:n.jsx(fi,{children:n.jsx(Wn,{children:n.jsx(ro,{children:n.jsxs(zn,{children:[n.jsx(et,{path:"/",element:n.jsx(Yi,{})}),n.jsx(et,{path:"/positions",element:n.jsx(eo,{})}),n.jsx(et,{path:"/strategies",element:n.jsx(so,{})}),n.jsx(et,{path:"/settings",element:n.jsx(no,{})})]})})})})})})}At.createRoot(document.getElementById("root")).render(n.jsx(X.StrictMode,{children:n.jsx(io,{})}));
